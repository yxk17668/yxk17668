<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>yxk17668</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="yxk17668">
<meta property="og:url" content="https://yxk17668.github.io/yxk17668/index.html">
<meta property="og:site_name" content="yxk17668">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="yxk17668">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/yxk17668/atom.xml" title="yxk17668" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/yxk17668/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/yxk17668/css/style.css">

  
    
<link rel="stylesheet" href="/yxk17668/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/yxk17668/" id="logo">yxk17668</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/yxk17668/" id="subtitle">less is more</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/yxk17668/">Home</a>
        
          <a class="main-nav-link" href="/yxk17668/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/yxk17668/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://yxk17668.github.io/yxk17668"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-一种面向后端的微服务低代码平台架构设计" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/yxk17668/2023/05/16/%E4%B8%80%E7%A7%8D%E9%9D%A2%E5%90%91%E5%90%8E%E7%AB%AF%E7%9A%84%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BD%8E%E4%BB%A3%E7%A0%81%E5%B9%B3%E5%8F%B0%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" class="article-date">
  <time class="dt-published" datetime="2023-05-16T09:16:50.000Z" itemprop="datePublished">2023-05-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/yxk17668/2023/05/16/%E4%B8%80%E7%A7%8D%E9%9D%A2%E5%90%91%E5%90%8E%E7%AB%AF%E7%9A%84%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BD%8E%E4%BB%A3%E7%A0%81%E5%B9%B3%E5%8F%B0%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/">一种面向后端的微服务低代码平台架构设计</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><strong>作者：京东科技 常姜洲</strong></p>
<h1 id="一、背景"><a href="#一、背景" class="headerlink" title="一、背景"></a>一、背景</h1><p>近期参加公司组织的极客中餐厅训练营，我们所在的小组接到的课题是微服务的低代码平台架构设计。目标是：结合京东业务研发实际情况，针对后端研发人员，设计一个微服务低代码平台，助力更高效低交付业务需求。现已结业，将我在本次项目中沉淀设计出的设计文档整理成文，期待与大家有进一步的碰撞沟通</p>
<h1 id="二、低代码平台整体技术架构设计"><a href="#二、低代码平台整体技术架构设计" class="headerlink" title="二、低代码平台整体技术架构设计"></a>二、低代码平台整体技术架构设计</h1><h2 id="1、低代码开发三阶段"><a href="#1、低代码开发三阶段" class="headerlink" title="1、低代码开发三阶段"></a>1、低代码开发三阶段</h2><p><strong>平台为开发者的三个阶段提供的核心功能：</strong></p>
<ol>
<li><p><strong>开发阶段：服务编排能力，</strong>提供可组合的方式绑定事件源和事件消费者（函数、API、数据源管理等基础能力）</p>
</li>
<li><p><strong>部署阶段：生成、托管、</strong>获取、构建和打包代码。</p>
</li>
<li><p><strong>运维阶段：为</strong> Serverless 应用提供部署和服务支持。提供友好的日志系统，能够帮助平台工具使用者快速定位问题，提供对各种使用中间件状态监控，避免工具平台成为一个黑盒子</p>
</li>
</ol>
<p>整个3阶段如下图所示：</p>
<p><img src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-10-26-19-519u9hq9yqpDwkkRd.png" alt="一种面向后端的微服务低代码平台架构设计"></p>
<h2 id="2、低代码平台功能架构设计"><a href="#2、低代码平台功能架构设计" class="headerlink" title="2、低代码平台功能架构设计"></a>2、低代码平台功能架构设计</h2><p><img src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-10-26-19-27dQ7JnPzkYRIonSr.png" alt="一种面向后端的微服务低代码平台架构设计"></p>
<p><strong>角色与主功能说明：</strong></p>
<p>本低代码开发平台的服务对象为开发者，旨在使用低代码开发平台，进行快速的微服务应用开发与部署，相对于传统的开发与部署方式减少研发时间，降低成本</p>
<p><strong>Low Code 开发面板：</strong></p>
<p>提供整个低代码应用开发生命周期的全功能的运营后台面板，可以在此面板完成开发阶段的各项配置、流程编排、脚本编写与调试、部署等功能。</p>
<p><strong>Low Code 控制面板：</strong></p>
<p>提供各种服务治理，告警配置管理，配置管理等服务控制功能模块</p>
<p><strong>基础功能说明：</strong></p>
<p>• 提供触发器、脚本函数、可视化函数的、连接器的开发与管理</p>
<p>• 提供多环境配置文件隔离</p>
<p>• 提供应用维度、函数维度监控相关配置</p>
<p>• 提供应用工程所有源文件、各环境配置数据的的版本管理</p>
<p><strong>部署功能说明：</strong></p>
<p>提供在线构建应用工程，在线调试函数、触发器、连接器等功能，调试完毕后可一键进行发布</p>
<p><strong>特色功能：</strong></p>
<p>为进一步提升业务域功能复用度，进一步减少重复功能开发的成本，同样提供基于模板，函数扩展点等功能的快速复用湖开发</p>
<p><strong>依赖：</strong></p>
<p>• 方便与JSF体系内的服务更好的融合，接入JSF注册中心API,进行JSF注册服务的信息获取</p>
<p>• 与统一配置平台打通进行在线配置变更的存储与变更，平台基础配置的存储与变更</p>
<p>• 存储层，元数据使用关系型数据库存储，流程文件、资源文件使用对象存储，源代码等文件使用git管理或者对象存储</p>
<p>• 监控功能依赖贡献现有的监控平台 UMP 、SGM的 的OPEN API 实现</p>
<p>• 日志平台，公司的日志平台暂无OPEN API 可以共建、或者私有化部署一套实现</p>
<h2 id="3、低代码应用开发流程"><a href="#3、低代码应用开发流程" class="headerlink" title="3、低代码应用开发流程"></a>3、低代码应用开发流程</h2><p><img src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-10-26-19-29RLGNfAIPsHF26UmE.png" alt="一种面向后端的微服务低代码平台架构设计"></p>
<h3 id="应用生命周期4阶段"><a href="#应用生命周期4阶段" class="headerlink" title="应用生命周期4阶段"></a><strong>应用生命周期4阶段</strong></h3><p><strong>开发与测试、构建保存、发布、运行</strong></p>
<ol>
<li><p>用户在编辑器中完成触发器、连接器、函数等主要低代码构件，可能复用已有模板和业务域能力进一步为开发提速</p>
</li>
<li><p>开发完成后可以根据属性配置、语言环境构建打包函数镜像，同时生成版本号。</p>
</li>
<li><p>发布版本，完成部署。</p>
</li>
<li><p>应用实例在运行时提供服务</p>
</li>
</ol>
<h3 id="广义流程编排"><a href="#广义流程编排" class="headerlink" title="广义流程编排"></a><strong>广义流程编排</strong></h3><p>• 可视化创建连接器</p>
<p>• 可视化创建触发器</p>
<p>• 支持可视化创建函数流程，BPMN, 流程节点可以是函数实体或者连接器实体，流程关系支持表达式编辑</p>
<p>• 支持脚本编写创建函数，支持多语言：Groovy,Java</p>
<p>• 支持多环境配置信息配置</p>
<p>• 支持配置通用函数、触发器、连接器等监控，健康度指标收集配置</p>
<h2 id="4、低代码平台技术架构"><a href="#4、低代码平台技术架构" class="headerlink" title="4、低代码平台技术架构"></a>4、低代码平台技术架构</h2><p><img src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-10-26-19-37AE9TzPRJ10bYiKIB.png" alt="一种面向后端的微服务低代码平台架构设计"></p>
<ol>
<li><p>蓝色部分是我们平台重点建设的应用</p>
</li>
<li><p>流量入口主要分为京东内外部两种流量入口</p>
</li>
<li><p>对于HTTP接口上层可以对接成熟的网关转换为对低代码应用的JSF调用即可，此部分本身已经实现 0代码，无需重复建设</p>
</li>
<li><p>对于JSF接口可以使用低代码应用的JSF接口触发器调用</p>
</li>
<li><p>监控与告警主要还是以复用公司内部组件为主，基于OPEN API 封装</p>
</li>
<li><p>下层主要依赖其他业务部门提供的JSF接口、各大中间件、存储层以及外部的一些HTTP接口、特殊协议的接口，消息等</p>
</li>
</ol>
<h2 id="5、低代码平台应用部署架构"><a href="#5、低代码平台应用部署架构" class="headerlink" title="5、低代码平台应用部署架构"></a>5、低代码平台应用部署架构</h2><p><img src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-10-26-19-39aHSxwxYDMFlLU26C.png" alt="一种面向后端的微服务低代码平台架构设计"></p>
<ol>
<li><p>每个低代码平台的应用都有一个代理服务（LC proxy）负责和平台通信，指令下发，数据上报等</p>
</li>
<li><p>低代码应用不改变现有应用的通信方式和现有的JSF接口、数据库、缓存等中间件使用原有方式通信</p>
</li>
<li><p>控制中心：负责给 proxy 发控制指令，配置指令、服务治理指令等</p>
</li>
<li><p>数据收集中心：负责收集低代码运行时配置的健康度指标源数据、流量等其他运行数据收集</p>
</li>
</ol>
<h2 id="6、低代码平台各角色系统工作机制"><a href="#6、低代码平台各角色系统工作机制" class="headerlink" title="6、低代码平台各角色系统工作机制"></a>6、低代码平台各角色系统工作机制</h2><p><img src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-10-26-19-4226fMc7EPqQZ2tTAD.png" alt="一种面向后端的微服务低代码平台架构设计"></p>
<h2 id="7、低代码平台单机应用架构"><a href="#7、低代码平台单机应用架构" class="headerlink" title="7、低代码平台单机应用架构"></a>7、低代码平台单机应用架构</h2><h3 id="单机运行环境简介"><a href="#单机运行环境简介" class="headerlink" title="单机运行环境简介"></a>单机运行环境简介</h3><p><img src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-10-26-19-44Jq106z8Xti7voZyQ.png" alt="一种面向后端的微服务低代码平台架构设计"></p>
<h3 id="单机应用架构"><a href="#单机应用架构" class="headerlink" title="单机应用架构"></a>单机应用架构</h3><p><img src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-10-26-19-44lPCoWXUeeZcgvVZ.png" alt="一种面向后端的微服务低代码平台架构设计"></p>
<ol>
<li><p>低代码平台单机应用为1个JVM 进程，和监控agent 、日志 agent 等agent进程一同部署在容器、或者KVM、物理机等OS 环境中</p>
</li>
<li><p>平台应用本身核心</p>
</li>
<li><p>low code proxy ,提供平台api接口，接受平台的指令，如：发布指令，接受到发布指令后去相关的存储服务拉取元配置信息和函数脚本、触发器、连接器配置、配置文件等低代码应用的源文件</p>
</li>
<li><p>执行引擎，负责对低代码应用连接器的加载、函数加载、触发器配加载，加载完成后对外提供服务，等待各种触发器的流量触发、</p>
</li>
<li><p>低代码应用核心构件</p>
</li>
<li><p>触发器为应用的流量入口：如接口、MQ消费者，定时任务回调等等，平台支持自定义触发器开发</p>
</li>
<li><p>函数为业务逻辑的编排，可以是特定语言的函数脚本，可以是bpmn组合的流程文件，</p>
</li>
<li><p>连接器负责和下游RPC接口，存储数据源、中间件平台的消息通信</p>
</li>
<li><p>多环境配置信息提供不同环境的参数配置</p>
</li>
<li><p>以上几个核心构件的有机组合共同在应用层基础能力至之上提供了</p>
</li>
<li><p>低代码应用作为一个运行单元被发布到平台应用中</p>
</li>
</ol>
<h1 id="三、低代码平台详细设计"><a href="#三、低代码平台详细设计" class="headerlink" title="三、低代码平台详细设计"></a>三、低代码平台详细设计</h1><p>由于是小组共创设计，我在详细设计中主要负责了连接器与触发器的设计部分，其他如函数、配置部分的设计与此详细设计这里不再赘述。大概思路如下</p>
<p>函数：支持各种语言的表达式函数、支持BPMN可视化流程编排</p>
<p>多环境配置：需要支持测试、生产、预发等环境配置文件</p>
<p>日志： 支持平台开发者自定义日志是否打印，打印格式，是否有掩码等</p>
<h2 id="1、连接器的设计"><a href="#1、连接器的设计" class="headerlink" title="1、连接器的设计"></a>1、连接器的设计</h2><h3 id="连接器定义"><a href="#连接器定义" class="headerlink" title="连接器定义"></a>连接器定义</h3><p><img src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-10-26-19-5377zSW8An7SQCjRy.png" alt="一种面向后端的微服务低代码平台架构设计"></p>
<ol>
<li><p>在一个低代码应用中连接器主要负责和其他业务方提供的RPC服务、中间件、存储等实体进行通信的组件</p>
</li>
<li><p>可以在脚本函数中直接调用连接器，也可以在流程函数中直接调用连接器</p>
</li>
<li><p>连接器支持其他未知新协议的制定</p>
</li>
</ol>
<h3 id="连接器的0代码开发与部署流程"><a href="#连接器的0代码开发与部署流程" class="headerlink" title="连接器的0代码开发与部署流程"></a>连接器的0代码开发与部署流程</h3><p><img src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-10-26-19-54779rUHbsYBOZpsW.png" alt="一种面向后端的微服务低代码平台架构设计"></p>
<h2 id="2、自定义连接器"><a href="#2、自定义连接器" class="headerlink" title="2、自定义连接器"></a>2、自定义连接器</h2><p><img src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-10-26-19-59wV6dDLSHIoUsYJa.png" alt="一种面向后端的微服务低代码平台架构设计"></p>
<p>1、为了适应内外部不同的连接器诉求，平台提供自定义触发器的能力</p>
<p>2、预留使用连接器使用的配置信息，为引入的通信中间件预留未来使用该触发器的使用方需要0代码配置的配置信息，如数据库的地址，账号密码等信息</p>
<p>3、连接器需要实现平台提供的API,这样以便函数或者触发器可以直接调用该连接器</p>
<p>4、调试无误后保存触发器，提交平台审核，审核通过后平台可上架该触发器</p>
<h2 id="3、自定义触发器"><a href="#3、自定义触发器" class="headerlink" title="3、自定义触发器"></a>3、自定义触发器</h2><p><img src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-10-26-20-007ejtW7378Lb9oiUK.png" alt="一种面向后端的微服务低代码平台架构设计"></p>
<p>1、为了适应内外部不同的触发器诉求，平台提供自定义触发器的能力</p>
<p>2、预留使用触发器使用的配置信息，为引入的通信中间件预留未来使用该触发器的使用方需要0代码配置的配置信息，如JSF的接口地址，别名等</p>
<p>3、使用纯代码写出该触发器的源代码，并预留调用低代码函数的入口，以便将来使用该触发器的使用者可以0代码配置触发器所调用的函数</p>
<p>4、调试无误后保存触发器，提交平台审核，审核通过后平台可上架该触发器</p>
<h1 id="四、低代码应用源文件"><a href="#四、低代码应用源文件" class="headerlink" title="四、低代码应用源文件"></a>四、低代码应用源文件</h1><p><img src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-10-26-20-01ZsjoO7J50j8HOVhZ.png" alt="一种面向后端的微服务低代码平台架构设计"></p>
<p>a、元信息，0代码，包含低代码应用的0代码开发部分的触发器元信息、连接器元信息</p>
<p>1、触发器配置信息：</p>
<p>▪ 通信中间件所需要的各个参数，接口名等等</p>
<p>▪ 调用函数的函数名称</p>
<p>▪ 是否打印日志，日志是否脱敏</p>
<p>2、连接器配置信息</p>
<p>▪ 通信中间件所需要的各个参数，密码，用户名等等</p>
<p>▪ 是否打印日志，日志是否脱敏</p>
<p>b、源文件，0代码，包含：流程文件、脚本文件</p>
<p>◦ 可视化流程编排产生的源文件，如bpmn流程文件</p>
<p>◦ 脚本编码产生的脚本文件，如自定义java函数</p>
<p>c、多环境配置，0代码，包含各个环境的配置文件</p>
<p>◦ 开发环境、生成环境的各个配置信息等，配置信息可以在触发器、函数、连接器中使用引入使用</p>
<p>d、日志组件配置</p>
<p>◦ 日志打印输出格式</p>
<p>◦ 日志输出路径</p>
<p>◦ 全局脱敏字段，脱敏正则</p>
<p>e、监控组件配置</p>
<p>◦ 监控埋点打印路径</p>
<p>◦ 监控埋点打印格式</p>
<p>d、低代码平台应用底座：</p>
<p>执行引擎、LC Proxy、中间件依赖的jar、应用框架springboot的jar等，这部分跟随不同的构建部署方式为可选项</p>
<h1 id="五、低代码应用的构建部署方式"><a href="#五、低代码应用的构建部署方式" class="headerlink" title="五、低代码应用的构建部署方式"></a>五、低代码应用的构建部署方式</h1><p><img src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-10-26-20-03BYnO7rtds26t6bZd.png" alt="一种面向后端的微服务低代码平台架构设计"></p>
<p>1、源文件热部署</p>
<p>这种方式应对于低代码平台的租户使用低代码平台所有集群的共享资源，选取一部分可用资源以后在控制面板进行选择发布，可以使用指定ip的模式应对相关权限问题，也可以不指定ip使用平台自定义分配。</p>
<p>▪ 受平台资源调度管控，参考上周控制面板的功能</p>
<p>▪ 日志与监控埋点由 LC Proxy 采集到平台提供的日志平台和监控平台</p>
<p>2、构建jar包、war包</p>
<p>这种方式应对于有自己的主机用户，拿到成品后即可部署无状态应用，打的包中不包含LC Proxy部分，执行引擎在应用启动的时候自动加载包中特定路径的流程文件、脚本文件等。</p>
<p>▪ 日志打印到特定目录，供用户自己的日志采集器采集</p>
<p>▪ 埋点文件按照特定格式打印到特定目录，供自己的日志采集器采集</p>
<p>3、构建镜像</p>
<p>这种方式应对于有自己的容器用户，拿到成品后即可部署无状态应用，打的包中不包含LC Proxy部分，执行引擎在应用启动的时候自动加载包中特定路径的流程文件、脚本文件等。</p>
<p>▪ 日志打印到特定目录，供用户自己的日志采集器采集</p>
<p>▪ 埋点文件按照特定格式打印到特定目录，供自己的日志采集器采集</p>
<p>4、低代码平台和部署平台的关系</p>
<p>◦ 内部</p>
<p>▪ 内部部署的低代码平台为了方便各业务方灵活使用，平台提供两种能力</p>
<p>▪ 1、共享资源模式：平台租户共享平台资源池，适用于消耗资源不大并发量不高的应用， 使用低代码平台本身提供的日志平台、监控平台结合做到各个维度的立体监控</p>
<p>▪ 2、自定义资源模式：平台对接体系内的JDOS平台，可以将低代码应用与JDOS应用进行关联，使用在JDOS平台申请的应用进行部署。这种方式提供单独的镜像文件进行部署，可结合体系内的日志中间件、监控平台， 与低代码平台本身提供的日志平台、监控平台结合做到各个维度的立体监控</p>
<p>◦ 外部</p>
<p>▪ 外部需求为成品包的时候，只需要构建出 如上所述的 jar、war供其下载即可</p>
<p>▪ <strong>外部需求为低代码平台私有化部署的时候，需要将方案设计中的几大应用为用户做私有化部署</strong></p>
<h1 id="六、一些问题的思考与收获"><a href="#六、一些问题的思考与收获" class="headerlink" title="六、一些问题的思考与收获"></a>六、一些问题的思考与收获</h1><p>1、扩展性不仅仅是在某一项功能上的扩展，站在全局视角看在架构设计中所有产品功能理论上都要尽可能考虑模块化，可插拔，进而搭积木成平台化，真正做到全场景和全链路可扩展</p>
<p>2、团队小伙伴对HTTP 触发器的设计输出，让我联想到 JSF注册中心等通用类注册中心都要解决的高可用问题，举一反三，同场景的同类解决方案的核心问题是相通的</p>
<p>3、对于未来业务发展生命周期没那么长，数据要求没有强隔离诉求的场景，能否基于数据模型做一层数据层的0代码开发？</p>
<p>4、流程驱动的低代码可以和数据驱动的低代码很好地结合起来</p>
<p>5、低代码平台产出物的多样化，为之后交付项目的产出物打开了思路，很多时候要站在客户角度考虑，客户的应用场景是什么，需要什么，那么我们就提供什么，张宇轩单元可跑，也可圈定某一部分功能集合，打包输出</p>
<p>低代码平台适合的场景的一些思考</p>
<p>1、可以应用在上层营销系统的开发中</p>
<p>2、可以用在流程较为通用的场景如：消息转化、数据统计、接口转发</p>
<p>3、可以应用在已有成熟的业务线进行外围的业务开发，如支付、结算等稳定系统上层要做一些简单业务编排的场景用</p>
<p>4、 面对同样一个业务需求是使用低代码开发还是使用纯代码开发，没有明确的可量化的分水岭，但是建议尝试，从中获到提效之后下一次面临需求的时候就会有较为明确的答案</p>
<p>案例1：我们曾在一个上层营销活动系统重尝试基于表达式引擎做了一个半配置化的活动配置系统（那个时候还没听过低代码这个词），现在想来算是比较原始的支持低代码系统，上新一个活动原本需要3个人日的开发量，基于对以往流程的复用，使用脚本语言，使用表达式进行编排和发布，0.5人日就搞定了，且系统无需重新发布。不得不说在合适的场景，低代码还是非常有空的。</p>
<p>案例2：大促的时的业务数据大屏的制作相信很多人都经历过，我们最近两次大促采取的方案都是使用星链对已有的数据接口和新的数据指标进行简单编排加工，提供JSF服务，再结合我们内部的网关系统将接口协议转化为HTTP, 直接在展示平台（如莫奈大屏）上直接使用，大促过后资源也可随之释放，非常方便与高效，同时也降低了研发成本</p>
<h1 id="七、结语"><a href="#七、结语" class="headerlink" title="七、结语"></a>七、结语</h1><p>流程驱动的低代码平台可以和数据驱动的低代码以及部分0代码开发组件可以很好地有机整合成统一的低代码平台，进一步提升研发效率</p>
<!-- 本文转自 [https://www.helloworld.net/p/2315185449](https://www.helloworld.net/p/2315185449)，如有侵权，请联系删除。 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://yxk17668.github.io/yxk17668/2023/05/16/%E4%B8%80%E7%A7%8D%E9%9D%A2%E5%90%91%E5%90%8E%E7%AB%AF%E7%9A%84%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BD%8E%E4%BB%A3%E7%A0%81%E5%B9%B3%E5%8F%B0%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" data-id="clvte0cgf000ab9ik43nyc7c4" data-title="一种面向后端的微服务低代码平台架构设计" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/%E4%BD%8E%E4%BB%A3%E7%A0%81%E5%B9%B3%E5%8F%B0/" rel="tag">低代码平台</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" rel="tag">微服务</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" rel="tag">架构设计</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-nginx-解决session一致性" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/yxk17668/2019/08/09/nginx-%E8%A7%A3%E5%86%B3session%E4%B8%80%E8%87%B4%E6%80%A7/" class="article-date">
  <time class="dt-published" datetime="2019-08-09T09:13:54.000Z" itemprop="datePublished">2019-08-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/yxk17668/2019/08/09/nginx-%E8%A7%A3%E5%86%B3session%E4%B8%80%E8%87%B4%E6%80%A7/">nginx 解决session一致性</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h5 id="1-session-粘滞性"><a href="#1-session-粘滞性" class="headerlink" title="1. session 粘滞性"></a>1. session 粘滞性</h5><blockquote>
<p>每个请求按访问ip的hash结果分配，这样每个访客固定访问一个后端服务器，可以解决session的问题</p>
</blockquote>
<figure class="highlight plaintext"><figcaption><span>backserver &#123;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ip_hash;</span><br><span class="line">server 192.168.0.14:88;</span><br><span class="line">server 192.168.0.15:80;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>但是有缺点，这存在单点风险，倘若我已经在192.168.0.14:88端口登录后，过段时间发现14服务器挂了（session时间未过期），那么这时候会访问到15服务器，那这时候需要重新登录，因为在拿14服务器上的JsessionId去15服务器请求发现不存在</p>
</blockquote>
<h5 id="2-session-粘滞性"><a href="#2-session-粘滞性" class="headerlink" title="2. session 粘滞性"></a>2. session 粘滞性</h5><blockquote>
<p>可以通过tomcat的server.xml文件进行配置，这样每个tomcat都会同步对应的session，那么此时即使某个tomcat被宕机了，也不影响服务</p>
<p>具体的tomcat可以参见如下： <a href="http://tomcat.apache.org/tomcat-9.0-doc/cluster-howto.html">tomcat官网对应集群配置</a></p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Cluster</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.ha.tcp.SimpleTcpCluster&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">channelSendOptions</span>=<span class="string">&quot;8&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;<span class="name">Manager</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.ha.session.DeltaManager&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">expireSessionsOnShutdown</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                   <span class="attr">notifyListenersOnReplication</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;<span class="name">Channel</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.tribes.group.GroupChannel&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Membership</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.tribes.membership.McastService&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">address</span>=<span class="string">&quot;228.0.0.4&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">port</span>=<span class="string">&quot;45564&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">frequency</span>=<span class="string">&quot;500&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">dropTime</span>=<span class="string">&quot;3000&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Receiver</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.tribes.transport.nio.NioReceiver&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">address</span>=<span class="string">&quot;auto&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">port</span>=<span class="string">&quot;4000&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">autoBind</span>=<span class="string">&quot;100&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">selectorTimeout</span>=<span class="string">&quot;5000&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">maxThreads</span>=<span class="string">&quot;6&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">Sender</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.tribes.transport.ReplicationTransmitter&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">Transport</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.tribes.transport.nio.PooledParallelSender&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">Sender</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Interceptor</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.tribes.group.interceptors.TcpFailureDetector&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Interceptor</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.tribes.group.interceptors.MessageDispatchInterceptor&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">Channel</span>&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;<span class="name">Valve</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.ha.tcp.ReplicationValve&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">filter</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">Valve</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.ha.session.JvmRouteBinderValve&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;<span class="name">Deployer</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.ha.deploy.FarmWarDeployer&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">tempDir</span>=<span class="string">&quot;/tmp/war-temp/&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">deployDir</span>=<span class="string">&quot;/tmp/war-deploy/&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">watchDir</span>=<span class="string">&quot;/tmp/war-listen/&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">watchEnabled</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">          <span class="tag">&lt;<span class="name">ClusterListener</span> <span class="attr">className</span>=<span class="string">&quot;org.apache.catalina.ha.session.ClusterSessionListener&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Cluster</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="3-session-共享"><a href="#3-session-共享" class="headerlink" title="3. session 共享"></a>3. session 共享</h5><h6 id="1-springboot版本"><a href="#1-springboot版本" class="headerlink" title="1. springboot版本"></a>1. springboot版本</h6><ul>
<li><p>对应的项目中pom文件添加</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.session<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-session-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>  </span><br></pre></td></tr></table></figure>
</li>
<li><p>在对应的application.properties中配置redis信息</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.redis.host=localhost  </span><br><span class="line">spring.redis.port=6379 </span><br></pre></td></tr></table></figure>

<ul>
<li>添加开启spring session支持的注解@EnableRedisHttpSession</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  </span><br><span class="line"><span class="meta">@EnableRedisHttpSession</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisSessionConfig</span> &#123;  </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<ul>
<li>添加验证的接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value(&quot;$&#123;server.port&#125;&quot;)</span></span><br><span class="line">    String port;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/session&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getSession</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;SessionId&quot;</span>, request.getSession().getId());</span><br><span class="line">        map.put(<span class="string">&quot;ServerPort&quot;</span>, <span class="string">&quot;服务端口号为 &quot;</span>+port);</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>访问 <a href="http://localhost:8080/session">http://localhost:8080/session</a></p>
</li>
<li><p>访问 <a href="http://localhost:8888/session">http://localhost:8888/session</a></p>
</li>
<li><p>结果中的SessionId是一致的，却是由两个不同项目工程来提供服务。这样子，SpringSession 利用拦截器 Filter 帮我们在每个请求前进行了同步设置，达到了分布式系统中 session 共享</p>
<h6 id="2-springmvc-版本"><a href="#2-springmvc-版本" class="headerlink" title="2. springmvc 版本"></a>2. springmvc 版本</h6></li>
<li><p>首先在pom.xml文件中添加对应的jar</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.session<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-session-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在对应springmvc-context.xml文件中配置</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;redisHttpSessionConfiguration&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">&quot;org.springframework.session.data.redis.config.annotation.web.http.RedisHttpSessionConfiguration&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxInactiveIntervalInSeconds&quot;</span> <span class="attr">value</span>=<span class="string">&quot;600&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jedisPoolConfig&quot;</span> <span class="attr">class</span>=<span class="string">&quot;redis.clients.jedis.JedisPoolConfig&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxTotal&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxIdle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;testOnBorrow&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;connectionFactory&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;org.springframework.data.redis.connection.jedis.JedisConnectionFactory&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;poolConfig&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;jedisPoolConfig&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;port&quot;</span> <span class="attr">value</span>=<span class="string">&quot;6379&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;hostName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;192.168.1.11&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xxx&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;timeout&quot;</span> <span class="attr">value</span>=<span class="string">&quot;30000&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    &lt;/bean &gt;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;redisTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.data.redis.core.RedisTemplate&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;connectionFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;connectionFactory&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;keySerializer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span>  <span class="attr">class</span>=<span class="string">&quot;org.springframework.data.redis.serializer.StringRedisSerializer&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;valueSerializer&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.data.redis.serializer.StringRedisSerializer&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    &lt;/bean &gt;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;redisUtil&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.isea533.mybatis.service.RedisUtil&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;redisTemplate&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;redisTemplate&quot;</span> /&gt;</span></span><br><span class="line">    &lt;/bean &gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>其次在web.xml中配置（非常重要，filter的名字必须是springSessionRepositoryFilter）</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>springSessionRepositoryFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.DelegatingFilterProxy<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>springSessionRepositoryFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>访问项目路径结果相同</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yxk17668.github.io/yxk17668/2019/08/09/nginx-%E8%A7%A3%E5%86%B3session%E4%B8%80%E8%87%B4%E6%80%A7/" data-id="clvte0cge0007b9ik0jpockw0" data-title="nginx 解决session一致性" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/nginx/" rel="tag">nginx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/session/" rel="tag">session</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/spring-session/" rel="tag">spring-session</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/springMVC/" rel="tag">springMVC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/springboot/" rel="tag">springboot</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Apidoc生成Restful-web-Api文档" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/yxk17668/2019/07/14/Apidoc%E7%94%9F%E6%88%90Restful-web-Api%E6%96%87%E6%A1%A3/" class="article-date">
  <time class="dt-published" datetime="2019-07-14T07:16:50.000Z" itemprop="datePublished">2019-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/yxk17668/2019/07/14/Apidoc%E7%94%9F%E6%88%90Restful-web-Api%E6%96%87%E6%A1%A3/">Apidoc生成Restful web Api文档</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Apidoc生成Restful-web-Api文档"><a href="#Apidoc生成Restful-web-Api文档" class="headerlink" title="Apidoc生成Restful web Api文档"></a>Apidoc生成Restful web Api文档</h2><blockquote>
<p>工具名称：apiDoc<br>Git地址：<a href="https://github.com/apidoc/apidoc">https://github.com/apidoc/apidoc</a><br>项目地址：<a href="http://apidocjs.com/">http://apidocjs.com/</a><br>样例项目：<a href="http://apidocjs.com/example_basic/">http://apidocjs.com/example_basic&#x2F;</a></p>
</blockquote>
<h4 id="一、安装apidoc模块"><a href="#一、安装apidoc模块" class="headerlink" title="一、安装apidoc模块"></a>一、安装apidoc模块</h4><blockquote>
<p>apidoc是nodejs模块，github上有安装和使用说明。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># npm install apidoc -g</span><br></pre></td></tr></table></figure>

<h4 id="二、在代码文件夹的根目录下，创建apidoc-json文件"><a href="#二、在代码文件夹的根目录下，创建apidoc-json文件" class="headerlink" title="二、在代码文件夹的根目录下，创建apidoc.json文件"></a>二、在代码文件夹的根目录下，创建apidoc.json文件</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xx平台&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;为您提供优质的数据服务&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xx平台&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;url&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;http://127.0.0.1:8080/demo&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;template&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;forceLanguage&quot;</span><span class="punctuation">:</span><span class="string">&quot;zh-cn&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>配置属性如下:<br>name：项目名称<br>version：项目版本<br>description：项目介绍<br>title：浏览器显示的标题内容<br>url：endpoints的前缀，例如<a href="https://api.github.com/v1">https://api.github.com/v1</a><br>sampleUrl：如果设置了，则在api文档中出现一个测试用的from表单 header<br>title：导航文字包含header.md文件<br>filename：markdown-file 文件名 footer<br>title：导航文字包含header.md文件<br>filename：markdown-file 文件名 </p>
<p>order：用于配置输出 api-names&#x2F;group-names 排序，在列表中的将按照列表中的顺序排序，不在列表中的名称将自动显示</p>
</blockquote>
<h4 id="三、在代码文件夹的根目录下，创建build-bat"><a href="#三、在代码文件夹的根目录下，创建build-bat" class="headerlink" title="三、在代码文件夹的根目录下，创建build.bat"></a>三、在代码文件夹的根目录下，创建build.bat</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apidoc -i e:/nodejs/myapp/ -o e:/nodejs/myapp/apidoc/</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apidoc -f &quot;.*\\.js$&quot; -f &quot;.*\\.java$&quot; -i myapp/ -o apidoc/ -t mytemplate/</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参数说明</p>
<p>-f 文件过滤<br>-i 代码文件夹<br>-o 输出Api文档的路径<br>-t 使用模板文件的路径，可以自定义输出的模板</p>
<p>tips:<br>参数名称加[name]，表示可选参数。</p>
</blockquote>
<h4 id="四、参数解释说明"><a href="#四、参数解释说明" class="headerlink" title="四、参数解释说明"></a>四、参数解释说明</h4><h5 id="api"><a href="#api" class="headerlink" title="@api"></a>@api</h5><blockquote>
<p><strong>@api {method} path [title]</strong></p>
</blockquote>
<blockquote>
<p>​ method：请求方法，<a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods">参见</a><br>​ path：请求路径<br>​ title(可选)：标题</p>
</blockquote>
<p>Example:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *@api &#123;get&#125; /user/:id</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<h5 id="apiDefine"><a href="#apiDefine" class="headerlink" title="@apiDefine"></a>@apiDefine</h5><blockquote>
<p> <strong>@apiDefine name [title] [description]</strong></p>
</blockquote>
<blockquote>
<p>定义重复内容，供其他模块引用</p>
<p>​ name：重复模块名<br>​ title（可选）：标题<br>​ description（可选）：说明</p>
</blockquote>
<p>Example1:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*@apiDefine MyError</span></span><br><span class="line"><span class="comment">*@apiError UserNotFound The &lt;code&gt;id&lt;/code&gt; of the User was not found.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*@api &#123;get&#125; /user/:id</span></span><br><span class="line"><span class="comment">*@apiUse MyError</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>Example2:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*@apiDefine admin User access only</span></span><br><span class="line"><span class="comment">*This optional description belong to to the group admin.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*@api &#123;get&#125; /user/:id</span></span><br><span class="line"><span class="comment">*@apiPermission admin</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h5 id="apiDescription"><a href="#apiDescription" class="headerlink" title="@apiDescription"></a>@apiDescription</h5><blockquote>
<p> <strong>@apiDescription text</strong></p>
</blockquote>
<blockquote>
<p>设置多行说明</p>
<p>​ text：多行说明内容</p>
</blockquote>
<p>Example</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*@apiDescription This is the Description.</span></span><br><span class="line"><span class="comment">*It is multiline capable.</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*Last line of Description.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h5 id="apiError"><a href="#apiError" class="headerlink" title="@apiError"></a>@apiError</h5><blockquote>
<p><strong>@apiError [(group)] [{type}] field [description]</strong></p>
</blockquote>
<blockquote>
<p> 请求错误参数</p>
<p>​ （group）（可选）：参数将以这个名称分组，不设置的话，默认是Error 4xx<br>​ {type}（可选）：返回值类型，例如：{Boolean}, {Number}, {String}, {Object}, {String[]}<br>​ field：返回值字段名称<br>​ descriptionoptional（可选）：返回值字段说明</p>
</blockquote>
<p>Example:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*@api &#123;get&#125; /user/:id</span></span><br><span class="line"><span class="comment">*@apiError UserNotFound The &lt;code&gt;id&lt;/code&gt; of the User was not found.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h5 id="apiErrorExample"><a href="#apiErrorExample" class="headerlink" title="@apiErrorExample"></a>@apiErrorExample</h5><blockquote>
<p><strong>@apiErrorExample [{type}] [title] example</strong></p>
</blockquote>
<blockquote>
<p>错误返回信息样例。</p>
<p>​ type（可选）：返回内容的格式<br>​ title（可选）：标题<br>​ example：样例，可以是多行文本</p>
</blockquote>
<p>Example:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    *@api &#123;get&#125; /user/:id</span></span><br><span class="line"><span class="comment">    *@apiErrorExample &#123;json&#125; Error-Response:</span></span><br><span class="line"><span class="comment">    *HTTP/1.1 404 Not Found</span></span><br><span class="line"><span class="comment">    *&#123;</span></span><br><span class="line"><span class="comment">        *&quot;error&quot;: &quot;UserNotFound&quot;</span></span><br><span class="line"><span class="comment">    *&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h5 id="apiExample"><a href="#apiExample" class="headerlink" title="@apiExample"></a>@apiExample</h5><blockquote>
<p><strong>@apiExample [{type}] title example</strong></p>
</blockquote>
<blockquote>
<p>请求Api的测试样例</p>
<p>​ {type}（可选）：请求方式类型<br>​ title：标题<br>​ example：样例，可以是多行文本</p>
</blockquote>
<p>Example:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*@api &#123;get&#125; /user/:id</span></span><br><span class="line"><span class="comment">*@apiExample &#123;curl&#125; Example usage:</span></span><br><span class="line"><span class="comment">*curl -i http://localhost/user/4711</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h5 id="apiGroup"><a href="#apiGroup" class="headerlink" title="@apiGroup"></a>@apiGroup</h5><blockquote>
<p><strong>@apiGroup name</strong></p>
</blockquote>
<blockquote>
<p>定义Api的分组</p>
<p>​ name：组名称，也是导航的标题</p>
</blockquote>
<p>Example:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*@api &#123;get&#125; /user/:id</span></span><br><span class="line"><span class="comment">*@apiGroup User</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h5 id="apiHeader"><a href="#apiHeader" class="headerlink" title="@apiHeader"></a>@apiHeader</h5><blockquote>
<p><strong>@apiHeader [(group)] [{type}] [field&#x3D;defaultValue] [description]</strong></p>
</blockquote>
<blockquote>
<p>定义head参数</p>
<p>​ (group)（可选）：分组<br>​ {type}（可选）：类型，例如：{Boolean}, {Number}, {String}, {Object}, {String[]}<br>​ field：变量名<br>​ [field]：定义变量，并标记变量是可选项<br>​ &#x3D;defaultValue（可选）：默认值<br>​ description（optional）：变量说明</p>
</blockquote>
<p>Examples:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*@api &#123;get&#125; /user/:id</span></span><br><span class="line"><span class="comment">*@apiHeader &#123;String&#125; access-key Users unique access-key.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h5 id="apiHeaderExample"><a href="#apiHeaderExample" class="headerlink" title="@apiHeaderExample"></a>@apiHeaderExample</h5><blockquote>
<p><strong>@apiHeaderExample [{type}] [title]  example</strong></p>
</blockquote>
<blockquote>
<p>head参数样例</p>
<p>​ {type}（可选）：请求方式类型<br>​ title：标题<br>​ example：样例，可以是多行文本</p>
</blockquote>
<p>Example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">*@api &#123;get&#125; /user/:id</span><br><span class="line">*@apiHeaderExample &#123;json&#125; Header-Example:</span><br><span class="line">*&#123;</span><br><span class="line">*&quot;Accept-Encoding&quot;: &quot;Accept-Encoding: gzip, deflate&quot;</span><br><span class="line">*&#125;</span><br><span class="line">*/@apiIgnore</span><br></pre></td></tr></table></figure>

<h5 id="apiIgnore-hint"><a href="#apiIgnore-hint" class="headerlink" title="@apiIgnore [hint]"></a>@apiIgnore [hint]</h5><blockquote>
<p>忽略不发布到文档</p>
<p>​ hint（可选）：不发布的原因</p>
</blockquote>
<p>Example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">*@apiIgnore Not finished Method</span><br><span class="line">*@api &#123;get&#125; /user/:id</span><br><span class="line">*/@apiName</span><br></pre></td></tr></table></figure>

<h5 id="apiName-name"><a href="#apiName-name" class="headerlink" title="@apiName name"></a>@apiName name</h5><blockquote>
<p>定义api名称</p>
<p>​ name：api名称</p>
</blockquote>
<p>Example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    *@api &#123;get&#125; /user/:id</span><br><span class="line">    *@apiName GetUser</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<h5 id="apiParam"><a href="#apiParam" class="headerlink" title="@apiParam"></a>@apiParam</h5><blockquote>
<p><strong>@apiParam [(group)] [{type}] [field&#x3D;defaultValue] [description]</strong></p>
</blockquote>
<blockquote>
<p>定义请求Api的参数</p>
<p>​ (group)（可选）：分组<br>​ {type}（可选）：类型，例如：{Boolean}, {Number}, {String}, {Object}, {String[]}<br>​ {type{size}}（可选）：类型限定长度，例如：{string{..5}} 限定最大长度为5个字符<br>​ {string{2..5}} 限定最短2个字符，最长5个字符<br>​ {number{100-999}} 限定数字在100-999之间<br>​ {type&#x3D;allowedValues}（可选）：类型限定值，例如：{string&#x3D;”small”}限定只允许传递small字符，<br>​ {string&#x3D;”small”,”huge”} 限定只允许传递small或huge字符，<br>​ {number&#x3D;1,2,3,99} 限定只允许传1，2，3，99这四个数字<br>​ field：变量名<br>​ [field]：定义变量，并标记变量是可选项 &#x3D;defaultValue（可选）：默认值<br>​ description（optional）：变量说明</p>
</blockquote>
<p>Examples:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    *@api &#123;get&#125; /user/:id</span><br><span class="line">    *@apiParam &#123;Number&#125; id Users unique ID.</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">*@api &#123;post&#125; /user/</span><br><span class="line">*@apiParam &#123;String&#125; [firstname]  Optional Firstname of the User.</span><br><span class="line">*@apiParam &#123;String&#125; lastname     Mandatory Lastname.</span><br><span class="line">*@apiParam &#123;String&#125; country=&quot;DE&quot; Mandatory with default value &quot;DE&quot;.</span><br><span class="line">*@apiParam &#123;Number&#125; [age=18]     Optional Age with default 18.</span><br><span class="line">*@apiParam (Login) &#123;String&#125; pass Only logged in users can post this.</span><br><span class="line">*In generated documentation a separate</span><br><span class="line">*&quot;Login&quot; Block will be generated.</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<h5 id="apiParamExample"><a href="#apiParamExample" class="headerlink" title="@apiParamExample"></a>@apiParamExample</h5><blockquote>
<p> @apiParamExample [{type}] [title] example</p>
</blockquote>
<blockquote>
<p>请求参数样例</p>
<p>​ {type}（可选）：请求方式类型<br>​ title：标题<br>​ example：样例，可以是多行文本</p>
</blockquote>
<p>Example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    *@api &#123;get&#125; /user/:id</span><br><span class="line">    *@apiParamExample &#123;json&#125; Request-Example:</span><br><span class="line">    *&#123;</span><br><span class="line">        *&quot;id&quot;: 4711</span><br><span class="line">    *&#125;</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<h5 id="apiPermission"><a href="#apiPermission" class="headerlink" title="@apiPermission"></a>@apiPermission</h5><blockquote>
<p><strong>@apiPermission name</strong></p>
</blockquote>
<blockquote>
<p>定义接口权限</p>
<p>​ name：权限名称</p>
</blockquote>
<p>Example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    *@api &#123;get&#125; /user/:id</span><br><span class="line">    *@apiPermission none</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<h5 id="apiSampleRequest"><a href="#apiSampleRequest" class="headerlink" title="@apiSampleRequest"></a>@apiSampleRequest</h5><blockquote>
<p><strong>@apiSampleRequest url</strong></p>
</blockquote>
<blockquote>
<p>设置测试请求form，如果在apidoc.json或package.json中设置过了sampleUrl，则默认请求地址为，sampleUrl+apipath，设置这个标签则重写测试请求路径</p>
<p>​ url：测试地址，<br>​ 样例<br>​ @apiSampleRequest <a href="http://www.example.com/">http://www.example.com</a> 改变测试地址<br>​ @apiSampleRequest &#x2F;my_test_path 在apipath中加前缀<br>​ @apiSampleRequest off 不显示测试请求from</p>
</blockquote>
<p>Examples: </p>
<blockquote>
<p>默认请求的地址是<a href="http://api.github.com/user/:id">http://api.github.com/user/:id</a></p>
</blockquote>
<blockquote>
<p>Configuration parameter sampleUrl: “<a href="http://api.github.com/">http://api.github.com</a>“</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    *@api &#123;get&#125; /user/:id</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<blockquote>
<p>需要将测试地址修改为<a href="http://test.github.com/some_path/user/:id%EF%BC%8C%E5%88%99">http://test.github.com/some_path/user/:id，则</a></p>
<p>Configuration parameter sampleUrl: “<a href="http://api.github.com/">http://api.github.com</a>“</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    *@api &#123;get&#125; /user/:id</span><br><span class="line">    *@apiSampleRequest http://test.github.com/some_path/</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当地址需要请求<a href="http://api.github.com/test/user/:id">http://api.github.com/test/user/:id</a> 则</p>
<p>Configuration parameter sampleUrl: “<a href="http://api.github.com/">http://api.github.com</a>“</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    *@api &#123;get&#125; /user/:id</span><br><span class="line">    *@apiSampleRequest /test</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<blockquote>
<p>不需要测试请求from Configuration parameter sampleUrl: “<a href="http://api.github.com/">http://api.github.com</a>“</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    *@api &#123;get&#125; /user/:id</span><br><span class="line">    *@apiSampleRequest off</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<blockquote>
<p>没有设置sampleUrl时需要显示测试请求from，并设置请求<a href="http://api.github.com/some_path/user/:id">http://api.github.com/some_path/user/:id</a></p>
</blockquote>
<blockquote>
<p>Configuration parameter sampleUrl is not set</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    *@api &#123;get&#125; /user/:id</span><br><span class="line">    *@apiSampleRequest http://api.github.com/some_path/</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<h5 id="apiSuccess"><a href="#apiSuccess" class="headerlink" title="@apiSuccess"></a>@apiSuccess</h5><blockquote>
<p><strong>@apiSuccess [(group)] [{type}] field [description]</strong></p>
</blockquote>
<blockquote>
<p>请求成功返回的参数</p>
<p>​ (group）（可选）：参数将以这个名称分组，不设置的话，默认是Error 4xx<br>​ {type}（可选）：返回值类型，例如：{Boolean}, {Number}, {String}, {Object}, {String[]}<br>​ field：返回值字段名称<br>​ descriptionoptional（可选）：返回值字段说明</p>
</blockquote>
<p>Example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    *@api &#123;get&#125; /user/:id</span><br><span class="line">    *@apiSuccess (200) &#123;String&#125; firstname Firstname of the User.</span><br><span class="line">    *@apiSuccess (200) &#123;String&#125; lastname  Lastname of the User.</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<h5 id="apiSuccessExample"><a href="#apiSuccessExample" class="headerlink" title="@apiSuccessExample"></a>@apiSuccessExample</h5><blockquote>
<p><strong>@apiSuccessExample [{type}] [title] example</strong></p>
</blockquote>
<blockquote>
<p> 请求成功返回数据样例</p>
<p>​ {type}（可选）：请求方式类型<br>​ title：标题<br>​ example：样例，可以是多行文本</p>
</blockquote>
<p>Example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    *@api &#123;get&#125; /user/:id</span><br><span class="line">    *@apiSuccessExample &#123;json&#125; Success-Response:</span><br><span class="line">    *HTTP/1.1 200 OK</span><br><span class="line">    *&#123;</span><br><span class="line">        *&quot;firstname&quot;: &quot;John&quot;,</span><br><span class="line">        *&quot;lastname&quot;: &quot;Doe&quot;</span><br><span class="line">    *&#125;</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<h5 id="apiUse"><a href="#apiUse" class="headerlink" title="@apiUse"></a>@apiUse</h5><blockquote>
<p><strong>@apiUse name</strong></p>
</blockquote>
<blockquote>
<p>使用在@apiDefine中定义的内容</p>
<p>​ name：在@apiDefine定义的name</p>
</blockquote>
<p>Example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    *@apiDefine MySuccess</span><br><span class="line">    *@apiSuccess &#123;string&#125; firstname The users firstname.</span><br><span class="line">    *@apiSuccess &#123;number&#125; age The users age.</span><br><span class="line">*/</span><br><span class="line">/**</span><br><span class="line">    *@api &#123;get&#125; /user/:id</span><br><span class="line">    *@apiUse MySuccess</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<h5 id="apiVersion"><a href="#apiVersion" class="headerlink" title="@apiVersion"></a>@apiVersion</h5><blockquote>
<p><strong>@apiVersion version</strong></p>
</blockquote>
<blockquote>
<p>设定Api的版本号</p>
<p>​ version：版本号，格式(major.minor.patch)</p>
</blockquote>
<p>Example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    *@api &#123;get&#125; /user/:id</span><br><span class="line">    *@apiVersion 1.6.2</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<h4 id="五、参考示例"><a href="#五、参考示例" class="headerlink" title="五、参考示例"></a>五、参考示例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiDefine</span> name 名称匹配</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiDefine</span> pub_params </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;string&#125; accesskey 授权凭证</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;string&#125; timestamp 时间戳</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;string&#125; random 随机数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;string&#125; digest 签名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@api</span> &#123;POST&#125; /bank/api/basicQuery.json 根据地址查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiGroup</span> name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiName</span> 根据地址查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiVersion</span> 1.0.0</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiHeader</span> &#123;String&#125; ContentType=application/json;charset=UTF-8 ContentType</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiHeader</span> &#123;String&#125; Accept=application/json;charset=UTF-8 Accept</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> pub_params</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;string&#125; name 名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;string&#125; [province] 省份</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;string&#125; [city] 城市</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParamExample</span> &#123;json&#125; paramExample:</span></span><br><span class="line"><span class="comment">     * &#123;</span></span><br><span class="line"><span class="comment">            * &quot;accesskey&quot;:&quot;xxxxxxxxxxxxxxxxxxxxxx&quot;,</span></span><br><span class="line"><span class="comment">            * &quot;timestamp&quot;:&quot;1552302151&quot;,</span></span><br><span class="line"><span class="comment">            * &quot;random&quot;:&quot;xxxxxxxxxxxxxxxxxxxxxx&quot;,</span></span><br><span class="line"><span class="comment">            * &quot;digest&quot;:&quot;xxxxxxxxxxxxxxxxxxxxxx&quot;,</span></span><br><span class="line"><span class="comment">            * &quot;message&quot;:&quot;&#123;\&quot;name\&quot;:\&quot;北部工业区\&quot;,\&quot;province\&quot;:\&quot;河北\&quot;,\&quot;city\&quot;:\&quot;岛市\&quot;,\&quot;pageNumber\&quot;:1,\&quot;pageSize\&quot;:10&#125;&quot;</span></span><br><span class="line"><span class="comment">        * &#125;</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> &#123;string&#125; responseCode 状态码：0.成功、-1.非法请求、-2.签名错误、-51.未知错误、</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> &#123;string&#125; responseMessage 响应提示信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> &#123;string&#125; bank_type x行</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> &#123;string&#125; city 城市</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> &#123;string&#125; code 号</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> &#123;string&#125; name 名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> &#123;string&#125; province 省份</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccessExample</span>  &#123;json&#125; Response (success):</span></span><br><span class="line"><span class="comment">     * &#123;</span></span><br><span class="line"><span class="comment">     *     &quot;accesskey&quot;: &quot;xxxxxxxxxxxxxxxxxxxxxx&quot;,</span></span><br><span class="line"><span class="comment">     *     &quot;secretKey&quot;: null,</span></span><br><span class="line"><span class="comment">     *     &quot;timestamp&quot;: &quot;20190307062545&quot;,</span></span><br><span class="line"><span class="comment">     *     &quot;random&quot;: &quot;xxxxxxxxxxxxxxxxxxxxxx&quot;,</span></span><br><span class="line"><span class="comment">     *     &quot;digest&quot;: &quot;xxxxxxxxxxxxxxxxxxxxxx&quot;,</span></span><br><span class="line"><span class="comment">     *     &quot;responseCode&quot;: 0,</span></span><br><span class="line"><span class="comment">     *     &quot;responseMessage&quot;: &quot;成功&quot;</span></span><br><span class="line"><span class="comment">     * &#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiErrorExample</span> Error-Response:</span></span><br><span class="line"><span class="comment">     * &#123;</span></span><br><span class="line"><span class="comment">     *     &quot;accesskey&quot;: &quot;xxxxxxxxxxxxxxxxxxxxxx&quot;,</span></span><br><span class="line"><span class="comment">     *     &quot;secretKey&quot;: null,</span></span><br><span class="line"><span class="comment">     *     &quot;timestamp&quot;: &quot;20190307062545&quot;,</span></span><br><span class="line"><span class="comment">     *     &quot;random&quot;: &quot;xxxxxxxxxxxxxxxxxxxxxx&quot;,</span></span><br><span class="line"><span class="comment">     *     &quot;digest&quot;: &quot;xxxxxxxxxxxxxxxxxxxxxx&quot;,</span></span><br><span class="line"><span class="comment">     *     &quot;responseCode&quot;: -1,</span></span><br><span class="line"><span class="comment">     *     &quot;responseMessage&quot;: &quot;非法请求&quot;</span></span><br><span class="line"><span class="comment">     * &#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @api &#123;POST&#125; /register 注册用户</span><br><span class="line"> * @apiGroup Users</span><br><span class="line"> * @apiVersion 0.0.1</span><br><span class="line"> * @apiDescription 用于注册用户</span><br><span class="line"> * @apiParam &#123;String&#125; account 用户账户名 </span><br><span class="line"> * @apiParam &#123;String&#125; password 密码</span><br><span class="line"> * @apiParam &#123;String&#125; mobile 手机号</span><br><span class="line"> * @apiParam &#123;int&#125; vip = 0  是否注册Vip身份 0 普通用户 1 Vip用户</span><br><span class="line"> * @apiParam &#123;String&#125; [recommend] 邀请码</span><br><span class="line"> * @apiParamExample &#123;json&#125; 请求样例：</span><br><span class="line"> *                ?account=sodlinken&amp;password=11223344&amp;mobile=13739554137&amp;vip=0&amp;recommend=</span><br><span class="line"> * @apiSuccess (200) &#123;String&#125; msg 信息</span><br><span class="line"> * @apiSuccess (200) &#123;int&#125; code 0 代表无错误 1代表有错误</span><br><span class="line"> * @apiSuccessExample &#123;json&#125; 返回样例:</span><br><span class="line"> *                &#123;&quot;code&quot;:&quot;0&quot;,&quot;msg&quot;:&quot;注册成功&quot;&#125;</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"> /**</span><br><span class="line"> * @api &#123;POST&#125; /login 用户登录</span><br><span class="line"> * @apiGroup Users</span><br><span class="line"> * @apiVersion 0.0.1</span><br><span class="line"> * @apiDescription 用于用户登录</span><br><span class="line"> * @apiParam &#123;String&#125; userName 用户名</span><br><span class="line"> * @apiParam &#123;String&#125; password 密码</span><br><span class="line"> * @apiParamExample &#123;json&#125; 请求样例：</span><br><span class="line"> *                ?userName=张三&amp;password=11223344</span><br><span class="line"> * @apiSuccess (200) &#123;String&#125; msg 信息</span><br><span class="line"> * @apiSuccess (200) &#123;String&#125; code 0 代表无错误 1代表有错误</span><br><span class="line"> * @apiSuccess (200) &#123;String&#125; user 用户信息</span><br><span class="line"> * @apiSuccess (200) &#123;String&#125; userId 用户id</span><br><span class="line"> * @apiSuccessExample &#123;json&#125; 返回样例:</span><br><span class="line"> *                &#123;&quot;code&quot;:&quot;0&quot;,&quot;msg&quot;:&quot;登录成功&quot;,&quot;userId&quot;:&quot;fe6386d550bd434b8cd994b58c3f8075&quot;&#125;</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"> /**</span><br><span class="line"> * @api &#123;GET&#125; /users/:id 获取用户信息</span><br><span class="line"> * @apiGroup Users</span><br><span class="line"> * @apiVersion 0.0.1</span><br><span class="line"> * @apiDescription 获取用户信息</span><br><span class="line"> * @apiSuccess (200) &#123;String&#125; msg 信息</span><br><span class="line"> * @apiSuccess (200) &#123;int&#125; code 0 代表无错误 1代表有错误</span><br><span class="line"> * @apiSuccess (200) &#123;String&#125; name 真实姓名</span><br><span class="line"> * @apiSuccess (200) &#123;String&#125; mobile 手机号</span><br><span class="line"> * @apiSuccess (200) &#123;String&#125; birthday 生日</span><br><span class="line"> * @apiSuccess (200) &#123;String&#125; email 邮箱</span><br><span class="line"> * @apiSuccess (200) &#123;String&#125; summary 简介</span><br><span class="line"> * @apiSuccess (200) &#123;String&#125; recommendCode 我的推荐码</span><br><span class="line"> * @apiSuccess (200) &#123;String&#125; idCardNo 身份证号</span><br><span class="line"> * @apiSuccess (200) &#123;String&#125; memberState 会员状态 0普通用户 1VIP 2账户冻结</span><br><span class="line"> * @apiSuccess (200) &#123;String&#125; address 家庭住址 </span><br><span class="line"> * @apiSuccess (200) &#123;String&#125; money 账户现金</span><br><span class="line"> * @apiSuccessExample &#123;json&#125; 返回样例:</span><br><span class="line"> * &#123;</span><br><span class="line"> *   &quot;code&quot;: 0,</span><br><span class="line"> *   &quot;msg&quot;: &quot;&quot;,</span><br><span class="line"> *   &quot;name&quot;: &quot;真实姓名&quot;,</span><br><span class="line"> *   &quot;mobile&quot;: 15808544477,</span><br><span class="line"> *   &quot;birthday&quot;: &quot;1990-03-05&quot;,</span><br><span class="line"> *   &quot;email&quot;: &quot;slocn@gamil.com&quot;,</span><br><span class="line"> *   &quot;summary&quot;: &quot;简介&quot;,</span><br><span class="line"> *   &quot;recommendCode&quot;: &quot;我的推荐码&quot;,</span><br><span class="line"> *   &quot;idCardNo&quot;: &quot;身份证号&quot;,</span><br><span class="line"> *   &quot;memberState&quot;: 1,</span><br><span class="line"> *   &quot;address&quot;: &quot;家庭住址&quot;,</span><br><span class="line"> *   &quot;money&quot;: &quot;30.65&quot;</span><br><span class="line"> * &#125;</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> /**</span><br><span class="line"> * @api &#123;POST&#125; /users/:id 修改(完善)用户信息</span><br><span class="line"> * @apiGroup Users</span><br><span class="line"> * @apiVersion 0.0.1</span><br><span class="line"> * @apiDescription 修改(完善)用户信息</span><br><span class="line"> * @apiParam (200) &#123;String&#125; [name] 真实姓名</span><br><span class="line"> * @apiParam (200) &#123;String&#125; [mobile] 手机号</span><br><span class="line"> * @apiParam (200) &#123;String&#125; [birthday] 生日</span><br><span class="line"> * @apiParam (200) &#123;String&#125; [email] 邮箱</span><br><span class="line"> * @apiParam (200) &#123;String&#125; [summary] 简介</span><br><span class="line"> * @apiParam (200) &#123;String&#125; [idCardNo] 身份证号</span><br><span class="line"> * @apiParam (200) &#123;String&#125; [address] 家庭住址</span><br><span class="line"> * @apiSuccess (200) &#123;String&#125; msg 信息</span><br><span class="line"> * @apiSuccess (200) &#123;int&#125; code 0 代表无错误 1代表有错误</span><br><span class="line"> * @apiSuccessExample &#123;json&#125; 返回样例:</span><br><span class="line"> *                &#123;&quot;code&quot;:&quot;0&quot;,&quot;msg&quot;:&quot;修改成功&quot;&#125;</span><br><span class="line"> */</span><br></pre></td></tr></table></figure>

<blockquote>
<p><em><strong>@apiParam*  *@apiSuccess</strong></em>带有层级关系的样式 如：res.*</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@api</span> &#123;get&#125; /rest/area/getAreasByCode 行政区域查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiDescription</span> 根据行政编码获取行政区域,0获取省级行政区域</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiName</span> getAreasByCode</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiGroup</span> area</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiVersion</span> 1.0.0</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125; code 行政编码</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSampleRequest</span> /rest/area/getAreasByCode</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> token_msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> success_msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> (success 2000) &#123;String&#125;   res.id    标识码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> (success 2000) &#123;String&#125;   res.name    行政地区名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> (success 2000) &#123;String&#125;   res.code    行政编码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> (success 2000) &#123;String&#125;   res.prevCode    上级行政编码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> (success 2000) &#123;String&#125;   res.allName    全称</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/getAreasByCode&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> RestResponse <span class="title function_">getAreasByCode</span><span class="params">(String code)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestResponse</span>(areaService.findAreaByPrevCode(code));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@api</span> &#123;get&#125; /rest/role/find 角色列表查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiDescription</span>  综合角色查询</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiName</span> find</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiGroup</span> role</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiVersion</span> 1.0.0</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> token_msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125;  [page]     当前第几页</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125;  [pageSize]    每页显示多少条数据,当该参数为0时表示不分页，查询全部</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125;  [name]    角色名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125;  [code]       角色代码</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSampleRequest</span> /rest/role/find</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> success_msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> (success 2000) &#123;Long&#125;      res.total    总条数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> (success 2000) &#123;Array&#125;    res.results    结果集</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> (success 2000) &#123;String&#125;    res.results.id    角色id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> (success 2000) &#123;String&#125;    res.results.name    角色名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> (success 2000) &#123;String&#125;    res.results.code        角色代码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> (success 2000) &#123;String&#125;    res.results.remark        角色描述</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> (success 2000) &#123;String&#125;    res.results.createTime        创建时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> (success 2000) &#123;String&#125;    res.results.updateTime        更新时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> (success 2000) &#123;String&#125;    res.results.sort        排序编号</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSuccess</span> (success 2000) &#123;String&#125;    res.results.isSuper        是否超级管理员</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/find&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> RestResponse <span class="title function_">find</span><span class="params">(String name,String code,String page,String pageSize)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestResponse</span>(rsp);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>表单上传示例</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@api</span> &#123;post&#125; /rest/user/create 新建用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiDescription</span>  新建用户</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiName</span> create</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiGroup</span> user</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiVersion</span> 1.0.0</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> token_msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;formData&#125;  [iconFile]     头像</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125;  loginName     登录名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125;  pwd     密码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125;  orgId     机构id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125;  [roleId]     角色id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125;  name    用户名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125;  [jobCode]    职务 1:科长 2：主任 3：科员 4：。。。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125;  [jobType]    职业性质 1：全职 2：兼职</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125;  [sex]    性别 1：男 2：女</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125;  phone    手机号</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125;   idCard   身份证号</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125;  birthday  出生日期</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125;  [address]    住址</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span>  &#123;String&#125; [contactUser] 紧急联系人</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span> &#123;String&#125;  [contactPhone] 紧急联系电话</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiParam</span>  &#123;String&#125; [sex]    性别  1:男  2：女</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiSampleRequest</span> /rest/user/create</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> success_msg</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> USER_EMPTY_NAME</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> USER_EMPTY_LOGIN_NAME</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> USER_EMPTY_PWD</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> USER_EMPTY_ORG</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> USER_EMPTY_ROLE</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> REGISTER_PHONE_EXIST</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> REGISTER_USERNAME_EXIST</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> USER_IDCARD_EXIST</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> REGISTER_ORG_UNEXIST</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> BASE_UPLOAD_FAIL</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@apiUse</span> BASE_SAVE_FAIL</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/create&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> RestResponse <span class="title function_">create</span><span class="params">(<span class="meta">@RequestParam(&quot;iconFile&quot;)</span> CommonsMultipartFile[] files</span></span><br><span class="line"><span class="params">                                ,String loginName,String pwd,String orgId,String roleId,String name,</span></span><br><span class="line"><span class="params">                               String jobCode,String jobType,String sex,String phone,String idCard,String birthday,String address,String contactUser,String contactPhone)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestResponse</span>(rest);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://yxk17668.github.io/yxk17668/2019/07/14/Apidoc%E7%94%9F%E6%88%90Restful-web-Api%E6%96%87%E6%A1%A3/" data-id="clvte0cg90000b9ik4o8pdzjk" data-title="Apidoc生成Restful web Api文档" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/Apidoc/" rel="tag">Apidoc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/Api%E6%96%87%E6%A1%A3/" rel="tag">Api文档</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Git-Mistake" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/yxk17668/2019/07/10/Git-Mistake/" class="article-date">
  <time class="dt-published" datetime="2019-07-09T16:55:53.000Z" itemprop="datePublished">2019-07-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/yxk17668/2019/07/10/Git-Mistake/">Git --changes not staged for commit</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="出现的操作"><a href="#出现的操作" class="headerlink" title="出现的操作"></a>出现的操作</h3><blockquote>
<p>正常 <strong>git add .</strong> ，然后<strong>git commit</strong></p>
</blockquote>
<blockquote>
<p>后仍然报 changes not staged for commit 错误，并且上传到仓库的文件夹是空的</p>
</blockquote>
<h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><ol>
<li><strong>先强行删除clone来的目录下的 .git 文件夹</strong></li>
</ol>
<blockquote>
<p> 删除方式：在该目录下打开命令行工具，执行 <strong>rd&#x2F;s&#x2F;q .git</strong>命令</p>
<p>删除成功后执行<strong>ls .git</strong>命令提示：No such file or directory</p>
</blockquote>
<ol start="2">
<li><strong>回到仓库根目录删除仓库中的空文件夹</strong></li>
</ol>
<blockquote>
<p>​    <strong>1）git rm -r –cached “themes&#x2F;materail”</strong></p>
<p>​    <strong>2）git commit -m “remove empty folder”</strong></p>
<p>​    <strong>3）git push origin master</strong></p>
</blockquote>
<ol start="3">
<li><strong>在仓库根目录重新提交代码</strong></li>
</ol>
<blockquote>
<p>​    <strong>1）git add .</strong></p>
<p>​    <strong>2）git commit -m “repush”</strong></p>
<p>​    <strong>3）git push origin master</strong></p>
</blockquote>
<blockquote>
<p>这样就能保证不会报上面的错，并且删除了空文件夹，重新把clone下来的目录</p>
</blockquote>
<h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><blockquote>
<p>clone 下来的文件夹也是一个 git 仓库，因此正常的 <strong>git add .</strong> 是无法提交该文件夹下的文件的，所以我们要做的就是删除文件夹下的 .git 文件夹，这样就可以通过  <strong>git add .</strong> 命令来提交内容</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yxk17668.github.io/yxk17668/2019/07/10/Git-Mistake/" data-id="clvte0cgb0001b9ik8qd02mb9" data-title="Git --changes not staged for commit" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/Git/" rel="tag">Git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/Git-mistake/" rel="tag">Git mistake</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Git实用篇" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/yxk17668/2019/07/10/Git%E5%AE%9E%E7%94%A8%E7%AF%87/" class="article-date">
  <time class="dt-published" datetime="2019-07-09T16:21:48.000Z" itemprop="datePublished">2019-07-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/yxk17668/2019/07/10/Git%E5%AE%9E%E7%94%A8%E7%AF%87/">Git实用篇</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="简单的代码提交流程"><a href="#简单的代码提交流程" class="headerlink" title="简单的代码提交流程"></a>简单的代码提交流程</h2><blockquote>
</blockquote>
<ol>
<li>git status 查看工作区代码相对于暂存区的差别</li>
<li>git add . 将当前目录下修改的所有代码从工作区添加到暂存区 . 代表当前目录</li>
<li>git commit -m ‘注释’ 将缓存区内容添加到本地仓库</li>
<li>git push origin master 将本地版本库推送到远程服务器， </li>
<li>origin是远程主机，master表示是远程服务器上的master分支，分支名是可以修改的</li>
</ol>
<h3 id="Git-add"><a href="#Git-add" class="headerlink" title="Git add"></a>Git add</h3><blockquote>
<p>​		git add [参数] &lt;路径&gt;　作用就是将我们需要提交的代码从工作区添加到暂存区，就是告诉git系统，我们要提交哪些文件，之后就可以使用git commit命令进行提交了。<br>下面都用 . 来标识路径， . 表示当前目录，路径可以修改，下列操作的作用范围都在版本库之内。</p>
<ol>
<li><p><strong>git add .</strong></p>
<p> 不加参数默认为将修改操作的文件和未跟踪新添加的文件添加到git系统的暂存区，注意不包括删除。</p>
</li>
<li><p>**git add -u . **<br>-u 表示将已跟踪文件中的修改和删除的文件添加到暂存区，不包括新增加的文件，注意这些被删除的文件被加入到暂存区再被提交并推送到服务器的版本库之后这个文件就会从git系统中消失了。</p>
</li>
<li><p>**git add -A . **<br>-A 表示将所有的已跟踪的文件的修改与删除和新增的未跟踪的文件都添加到暂存区。</p>
</li>
</ol>
</blockquote>
<hr>
<h3 id="Git-commit"><a href="#Git-commit" class="headerlink" title="Git commit"></a>Git commit</h3><blockquote>
<p>​		git commit 主要是将暂存区里的改动给提交到本地的版本库。每次使用git commit 命令我们都会在本地版本库生成一个40位的哈希值，这个哈希值也叫commit-id<br>commit-id 在版本回退的时候是非常有用的，它相当于一个快照,可以在未来的任何时候通过与git reset的组合命令回到这里。</p>
<ol>
<li><p>**git commit -m ‘message’ **</p>
<p>​	-m 参数表示可以直接输入后面的“message”，如果不加 -m参数，那么是不能直接输入message的，而是会调用一个编辑器一般是vim来让你输入这个message<br>message即是我们用来简要说明这次提交的语句</p>
</li>
<li><p>**git commit -am ‘message’ -am等同于-a -m **</p>
<p>​	-a参数可以将所有已跟踪文件中的执行修改或删除操作的文件都提交到本地仓库，即使它们没有经过git add添加到暂存区，<br><del>注意: 新加的文件（即没有被git系统管理的文件）是不能被提交到本地仓库的</del></p>
</li>
</ol>
</blockquote>
<h3 id="Git-push"><a href="#Git-push" class="headerlink" title="Git push"></a>Git push</h3><blockquote>
<p>​		在使用git commit命令将修改从暂存区提交到本地版本库后，只剩下最后一步将本地版本库的分支推送到远程服务器上对应的分支了，如果不清楚版本库的构成，可以查看git 仓库的基本结构<br>git push的一般形式为 git push &lt;远程主机名&gt; &lt;本地分支名&gt; &lt;远程分支名&gt; ，例如 git push origin master：refs&#x2F;for&#x2F;master ，即是将本地的master分支推送到远程主机origin上的对应master分支， origin 是远程主机名。第一个master是本地分支名，第二个master是远程分支名</p>
<ol>
<li><p><strong>git push origin master</strong></p>
<p>​		如果远程分支被省略，如上则表示将本地分支推送到与之存在追踪关系的远程分支（通常两者同名），如果该远程分支不存在，则会被新建</p>
</li>
<li><p><strong>git push origin ：refs&#x2F;for&#x2F;master</strong><br>    如果省略本地分支名，则表示删除指定的远程分支，因为这等同于推送一个空的本地分支到远程分支，等同于 git push origin –delete master</p>
</li>
<li><p><strong>git push origin</strong><br>    如果当前分支与远程分支存在追踪关系，则本地分支和远程分支都可以省略，将当前分支推送到origin主机的对应分支</p>
</li>
<li><p><strong>git push</strong><br>    如果当前分支只有一个远程分支，那么主机名都可以省略，形如 git push，可以使用git branch -r ，查看远程的分支名</p>
</li>
</ol>
</blockquote>
<h3 id="refs-for"><a href="#refs-for" class="headerlink" title="refs&#x2F;for"></a>refs&#x2F;for</h3><blockquote>
<p>refs&#x2F;for 的意义在于我们提交代码到服务器之后是需要经过code review 之后才能进行merge的，而refs&#x2F;heads 不需要</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yxk17668.github.io/yxk17668/2019/07/10/Git%E5%AE%9E%E7%94%A8%E7%AF%87/" data-id="clvte0cgd0005b9ik3whs9boq" data-title="Git实用篇" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/Git/" rel="tag">Git</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-helper-live2d" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/yxk17668/2019/06/06/helper-live2d/" class="article-date">
  <time class="dt-published" datetime="2019-06-06T15:39:19.000Z" itemprop="datePublished">2019-06-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/yxk17668/2019/06/06/helper-live2d/">helper-live2d</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="helper-live2d插件"><a href="#helper-live2d插件" class="headerlink" title="helper-live2d插件"></a>helper-live2d插件</h2><blockquote>
<p>博客根目录选择cmd命令窗口或者git bash 输入以下代码，安装插件</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure>

<h2 id="下载模型"><a href="#下载模型" class="headerlink" title="下载模型"></a>下载模型</h2><blockquote>
<p>作者动画展示网站<a href="https://huaji8.top/post/live2d-plugin-2.0/">helper-live2d</a>;任选下载</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">live2d-widget-model-chitose</span><br><span class="line">live2d-widget-model-epsilon2_1</span><br><span class="line">live2d-widget-model-gf</span><br><span class="line">live2d-widget-model-haru/01 (use npm install --save live2d-widget-model-haru)</span><br><span class="line">live2d-widget-model-haru/02 (use npm install --save live2d-widget-model-haru)</span><br><span class="line">live2d-widget-model-haruto</span><br><span class="line">live2d-widget-model-hibiki</span><br><span class="line">live2d-widget-model-hijiki</span><br><span class="line">live2d-widget-model-izumi</span><br><span class="line">live2d-widget-model-koharu</span><br><span class="line">live2d-widget-model-miku</span><br><span class="line">live2d-widget-model-ni-j</span><br><span class="line">live2d-widget-model-nico</span><br><span class="line">live2d-widget-model-nietzsche</span><br><span class="line">live2d-widget-model-nipsilon</span><br><span class="line">live2d-widget-model-nito</span><br><span class="line">live2d-widget-model-shizuku</span><br><span class="line">live2d-widget-model-tororo</span><br><span class="line">live2d-widget-model-tsumiki</span><br><span class="line">live2d-widget-model-unitychan</span><br><span class="line">live2d-widget-model-wanko</span><br><span class="line">live2d-widget-model-z16</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在hexo博客根目录选择cmd命令窗口或者git bash 输入以下代码</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install live2d-widget-model-hijiki</span><br></pre></td></tr></table></figure>

<h2 id="添加配置"><a href="#添加配置" class="headerlink" title="添加配置"></a>添加配置</h2><blockquote>
<p>_config.yml 文件添加配置</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">live2d:</span><br><span class="line">  enable: true</span><br><span class="line">  scriptFrom: local</span><br><span class="line">  pluginRootPath: live2dw/</span><br><span class="line">  pluginJsPath: lib/</span><br><span class="line">  pluginModelPath: assets/</span><br><span class="line">  tagMode: false</span><br><span class="line">  debug: false</span><br><span class="line">  model:</span><br><span class="line">    use: live2d-widget-model-hijiki</span><br><span class="line">  display:</span><br><span class="line">    position: right</span><br><span class="line">    width: 150</span><br><span class="line">    height: 300</span><br><span class="line">  mobile:</span><br><span class="line">    show: true</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://yxk17668.github.io/yxk17668/2019/06/06/helper-live2d/" data-id="clvte0cgd0004b9ik4kby5c5r" data-title="helper-live2d" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/helper-live2d/" rel="tag">helper-live2d</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/hexo/" rel="tag">hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/yilia/" rel="tag">yilia</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-yilia" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/yxk17668/2019/06/06/yilia/" class="article-date">
  <time class="dt-published" datetime="2019-06-06T09:08:03.000Z" itemprop="datePublished">2019-06-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/yxk17668/2019/06/06/yilia/">yilia主题</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>##Hexo添加文章目录</p>
<h3 id="文件配置"><a href="#文件配置" class="headerlink" title="文件配置"></a>文件配置</h3><blockquote>
<p>我们需要编辑文章显示页面的模版，如下文件</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">themes/landscape/layout/_partial/article.ejs</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在文件中找到对应的关键代码</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- post.content %&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>并在这一行之前加入如下代码：</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Table of Contents --&gt;</span></span><br><span class="line">&lt;% if (!index &amp;&amp; post.toc)&#123; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;toc&quot;</span> <span class="attr">class</span>=<span class="string">&quot;toc-article&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">strong</span> <span class="attr">class</span>=<span class="string">&quot;toc-title&quot;</span>&gt;</span>文章目录<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">&lt;%- toc(post.content) %&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>文章开头的front-matter中添加一句toc: true属性</p>
</blockquote>
<h3 id="CSS样式添加"><a href="#CSS样式添加" class="headerlink" title="CSS样式添加"></a>CSS样式添加</h3><blockquote>
<p>指定文件目录修改样式</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">themes/landscape/source/css/_partial/article.styl</span><br></pre></td></tr></table></figure>
<blockquote>
<p>代码如下：</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">/*toc*/</span><br><span class="line">.toc-article</span><br><span class="line">    background #eee</span><br><span class="line">    border 1px solid #bbb</span><br><span class="line">    border-radius 10px</span><br><span class="line">    margin 1.5em 0 0.3em 1.5em</span><br><span class="line">    padding 1.2em 1em 0 1em</span><br><span class="line">    max-width 28%</span><br><span class="line"></span><br><span class="line">.toc-title</span><br><span class="line">    font-size 120%</span><br><span class="line"></span><br><span class="line">#toc</span><br><span class="line">    line-height 1em</span><br><span class="line">    font-size 0.9em</span><br><span class="line">    float right</span><br><span class="line">.toc</span><br><span class="line">    padding 0</span><br><span class="line">    margin 1em</span><br><span class="line">    line-height 1.8em</span><br><span class="line">    li</span><br><span class="line">    list-style-type none</span><br><span class="line"></span><br><span class="line">.toc-child </span><br><span class="line">    margin-left 1em</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><blockquote>
<p>由于Hexo使用的是stylus预处理器，所以CSS代码要注意缩进，不然就报错了</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yxk17668.github.io/yxk17668/2019/06/06/yilia/" data-id="clvte0cge0008b9ikh8o2fmbt" data-title="yilia主题" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/hexo/" rel="tag">hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/yilia/" rel="tag">yilia</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Markdown" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/yxk17668/2019/06/06/Markdown/" class="article-date">
  <time class="dt-published" datetime="2019-06-06T07:52:32.000Z" itemprop="datePublished">2019-06-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/yxk17668/2019/06/06/Markdown/">Markdown语法</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Markdown简介"><a href="#Markdown简介" class="headerlink" title="Markdown简介"></a>Markdown简介</h2><blockquote>
<p>Markdown 是一种轻量级标记语言，它允许人们使用易读易写的纯文本格式编写文档，然后转换成格式丰富的HTML页面。    —— <a href="https://zh.wikipedia.org/wiki/Markdown">维基百科</a></p>
</blockquote>
<h3 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@requires_authorization</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">somefunc</span>(<span class="params">param1=<span class="string">&#x27;&#x27;</span>, param2=<span class="number">0</span></span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;A docstring&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> param1 &gt; param2: <span class="comment"># interesting</span></span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Greater&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> (param2 - param1 + <span class="number">1</span>) <span class="keyword">or</span> <span class="literal">None</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SomeClass</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>message = <span class="string">&#x27;&#x27;&#x27;interpreter</span></span><br><span class="line"><span class="string"><span class="meta">... </span>prompt&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="LaTeX-公式"><a href="#LaTeX-公式" class="headerlink" title="LaTeX 公式"></a>LaTeX 公式</h3><p>可以创建行内公式，例如 $\Gamma(n) &#x3D; (n-1)!\quad\forall n\in\mathbb N$。或者块级公式：</p>
<p>$$	x &#x3D; \dfrac{-b \pm \sqrt{b^2 - 4ac}}{2a} $$</p>
<h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h3><table>
<thead>
<tr>
<th align="left">Item</th>
<th align="right">Value</th>
<th align="center">Qty</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Computer</td>
<td align="right">1600 USD</td>
<td align="center">5</td>
</tr>
<tr>
<td align="left">Phone</td>
<td align="right">12 USD</td>
<td align="center">12</td>
</tr>
<tr>
<td align="left">Pipe</td>
<td align="right">1 USD</td>
<td align="center">234</td>
</tr>
</tbody></table>
<h3 id="流程图"><a href="#流程图" class="headerlink" title="流程图"></a>流程图</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">st=&gt;start: Start</span><br><span class="line">e=&gt;end</span><br><span class="line">op=&gt;operation: My Operation</span><br><span class="line">cond=&gt;condition: Yes or No?</span><br><span class="line"></span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;e</span><br><span class="line">cond(no)-&gt;op</span><br></pre></td></tr></table></figure>

<p>以及时序图:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Alice-&gt;Bob: Hello Bob, how are you?</span><br><span class="line">Note right of Bob: Bob thinks</span><br><span class="line">Bob--&gt;Alice: I am good thanks!</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://yxk17668.github.io/yxk17668/2019/06/06/Markdown/" data-id="clvte0cgd0003b9ik986796j5" data-title="Markdown语法" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/Markdown/" rel="tag">Markdown</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/hexo/" rel="tag">hexo</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-提升代码质量：领域模型、设计原则、设计模式" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/yxk17668/2019/05/16/%E6%8F%90%E5%8D%87%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%EF%BC%9A%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B%E3%80%81%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99%E3%80%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="article-date">
  <time class="dt-published" datetime="2019-05-16T02:16:50.000Z" itemprop="datePublished">2019-05-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/yxk17668/2019/05/16/%E6%8F%90%E5%8D%87%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%EF%BC%9A%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B%E3%80%81%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99%E3%80%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">提升代码质量：领域模型、设计原则、设计模式</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="提升代码质量：领域模型、设计原则、设计模式"><a href="#提升代码质量：领域模型、设计原则、设计模式" class="headerlink" title="提升代码质量：领域模型、设计原则、设计模式"></a>提升代码质量：领域模型、设计原则、设计模式</h1><p>我们可以列举出非常多质量差的代码的表现现象，如名字不知所意、超大类、超大方法、重复代码、代码难懂、代码修改困难……</p>
<h2 id="一、影响代码差的根因"><a href="#一、影响代码差的根因" class="headerlink" title="一、影响代码差的根因"></a><strong>一、影响代码差的根因</strong></h2><h4 id="1-差代码的体现"><a href="#1-差代码的体现" class="headerlink" title="1.差代码的体现"></a>1.差代码的体现</h4><p>我们可以列举出非常多质量差的代码的表现现象，如名字不知所意、超大类、超大方法、重复代码、代码难懂、代码修改困难……其中最为影响代码质量的两个表现是命名名不副实、逻辑可扩展性差，当一个新人阅读代码时，有时发现方法命名与实际逻辑对不上，这就让人感到非常疑惑，这种现象在平时工作并不少见；另一个就是逻辑扩展性差，一个新业务需求提出来后，发现要在多处改动，需要回归的业务逻辑比较多，造成研发效率不高。</p>
<h4 id="2-问题归纳"><a href="#2-问题归纳" class="headerlink" title="2.问题归纳"></a>2.问题归纳</h4><p>对第1节中提到的现象进行问题归纳整理，大致整理出6类问题，分别展开加以说明。</p>
<ul>
<li><p>命名问题：命名问题是一件非常头疼的事，想要取一个名副其实又好理解的名字并不那么容易。涉及到变量的命名、方法的命名、类命名，常见的命名问题有两种：一种是不知所云；另一种是名不副实。命名不知所云是一个人初一看，不知道它是什么意思，根本原因就是没有想到一个合适的词汇去抽象问题；命名名不副实是命名和实际逻辑想表达的意思不一样，这样的命名会误导人。</p>
</li>
<li><p>代码结构问题：当一个人初看工程代码时，当还没有深入看代码逻辑时，从模块划分、类划分、方法划分整体上可以感受得出代码质量，如果一个类有几千行代码，一个方法有几百行，这样的逻辑相信没有多少人愿意去看，复杂度比较高。好的代码层次结构非常清晰，就像看一本优美的书一样有一种赏心悦目的感觉。</p>
</li>
<li><p>编程范式问题：有三种编程范式：表模式、事务脚本模式和领域设计模式，大家用得最多的是事务脚本模式，这种模式最符合人做事的方法，step by step，这种模式最大的问题就是承担了不该自己承担的职责，看起来比较符合逻辑，实际上问题比较多，平时大家喜欢称之为”面条型代码”。</p>
</li>
<li><p>可读性问题：代码除了实现业务功能外，还要具备良好的可读性，有的代码没有任何注释；有的代码格式不统一；有的是为了炫耀技术，大段大段的Lambda表达式（并不是说Lambda表达式不好，关键要控制层次深度），这样的代码看起来简洁，可读性并不太好。</p>
</li>
<li><p>扩展性问题：可扩展性问题是一个老生常谈的问题，要实现良好的可扩展性并不那么容易，一般是没有抽象问题，如店铺在店招头展示Tab，面条型的代码就是直接定义一个List，然后往里面加Tab对象，如果需要再加一个Tab怎么办？典型的就是不满足开闭原则。</p>
</li>
<li><p>无设计问题：整个代码看起来比较平淡，别人看了之后也从中学习不到内容。一般这种问题是没有深入分析问题，仅仅解决了问题，而没有考虑如何更好地解决问题，比如重复处理流程的工作是否可以抽象成一个通用的模板类、不同处理类是否可以通过工厂类去获取具体的策略、异步处理是否可以使用事件模式去处理、对于新增加的能力能否通过自动注册去发现……</p>
</li>
</ul>
<h4 id="3-根因分析"><a href="#3-根因分析" class="headerlink" title="3.根因分析"></a>3.根因分析</h4><p>接下来分析下为什么会产生代码差的原因，这个问题有外部原因，也有内部原因。外部原因主要有：项目排期急，没有多少时间去设计；资源短缺，人手不够，只能怎么快怎么来；紧急问题修复，临时方案快速处理……。内部原因主要有：自身技能低，怎么技能没有掌握到，如Lamda表达式、常用的工具类、框架高级用法等；无极致追求的精神，仅仅完成需求就行，稳定性、可扩展性、性能、数据一致性等没有考虑……</p>
<p>笔者认为最为关键的是内部自身的问题，根因就两个：自我要求不高；无反馈通道。如果对自已要求不高，仅仅满足完成需求开发就止步了，很难写出高质量的代码，另外如果没有外部反馈，也难以提高自己的技能。笔者之前的主管非常严厉，对大家写的代码review比较仔细，一个变量名、一段逻辑的写法，反复让修改，这其实是提升技能最快的方法。</p>
<p><img src="https://s4.51cto.com/oss/202108/19/1d9ac64c182c24e7d8d89b6f0de3e23c.jpg"></p>
<h2 id="二、提升代码质量的方法"><a href="#二、提升代码质量的方法" class="headerlink" title="二、提升代码质量的方法"></a>二、提升代码质量的方法</h2><p>提升代码质量的方法，笔者喜欢用三个方法：领域建模、设计原则、设计模式，主要谈下如何使用。</p>
<ul>
<li><p>分析阶段：当拿到一个需求时，先不要着急想着怎么把这个功能实现，这种很容易陷入事务脚本的模式。分析什么呢？需要分析需求的目的是什么、完成该功能需要哪些实体承担，这一步核心是找实体。举个上面进店Tab展示的例子，它有两个关键的实体：导航栏、Tab，其中导航栏里面包含了若干个Tab。</p>
</li>
<li><p>设计阶段：分析完了有哪些实体后，再分析职责如何分配到具体的实体上，这就要运用一些设计原则去指导，GRASP中提到一些职责分配的原则，感兴趣的同学可以去详细看看。回到上面的例子上，Tab的职责主要有两个：一个是Tab能否展示，这是它自己的职责，如上新Tab展示的逻辑是店铺30天内有上架新商品；另一个职责就是Tab规格信息的构建，也是它自己要负责的。导航栏的职责有两个：一个是接受Tab注册；另一个是展示。职责分配不适理，也就不满足高内聚、低耦合的特征。</p>
</li>
<li><p>打磨阶段：这个阶段选择合适的模式去实现，大家一看到模式都会理解它是做什么的，比如看到模板类，就会知道处理通用的业务流程，具体变化的部分放在子类中处理。上面的这个例子，用到了2个设计模式：一个是订阅者模式，Tab自动注册的过程；另一个是模板模式，先判断Tab能否展示，然后再构建Tab规格信息，流程虽然简单，也可以抽象出来通用的流程出来，子类只用简单地重写2个方法。</p>
</li>
</ul>
<p><img src="https://s5.51cto.com/oss/202108/19/ff1280886766202e257e5742e22cf02d.jpg"></p>
<h2 id="三、领域模型的作用"><a href="#三、领域模型的作用" class="headerlink" title="三、领域模型的作用"></a>三、领域模型的作用</h2><p>领域建模的入门门槛比较高，包含了一些难理解的概念。本篇文章中并不会讲述如何进行建模（可以私下交流），笔者发现让大家接受领域建模远比知道如何建模更重要，当你知道了领域建模的作用后，自己会想各种办法去学习。下面通过笔者经历的一些实际案例进行阐述，让大家听起来并不感觉到那么空洞。</p>
<h4 id="1-简化认识"><a href="#1-简化认识" class="headerlink" title="1.简化认识"></a>1.简化认识</h4><p>笔者工作一年后加入到了一家金融公司，当时对金融一无所知，开始接触到标的、债权、债权转让、融资担保、非融资担保等名词后，一时感到无所适从，每天要学习非常多的新内容。</p>
<p>两个月后，我的主管给我们做了一次分享，就拿了一张ppt来讲，它里面包含了领域的实体，以及实体之间的关联关系，一下子我就知道了整个业务是怎么玩转的。模型的作用就是简化人对事物的认识，如果一开始我们就陷入到代码细节中，很难看到业务的全貌，而且代码是为了实现业务能力，当你知道了业务之后，再去看代码就会快得多。</p>
<h4 id="2-统一认识"><a href="#2-统一认识" class="headerlink" title="2.统一认识"></a>2.统一认识</h4><p>在公司里，有研发、产品、运营、测试……，当我们在一起交流的时候，大家默认的语言是不统一的，开发经常讲怎么操作这张数据库表，产品经常讲业务模式……这就导致大家的认识并不统一。</p>
<p>那是一个晚上，刚和交互同学确认完交互流程后，突然她问了一个问题：把相似的页面让卖家移到同一个文夹中，这个好实现吧？听完后告知不能，交互同学一听说这很合理呀，怎么实现不了？开始给她讲了下现有的系统流程，发现她听得一脸懵逼，马上发现问题了，我是用开发的语言在描述问题，立马换了一种方式，找了一支笔和一张纸，给交互同学画了我们的领域模型是什么，业务实体之间的交互是怎样的，一讲完后，交互同学马上明白了为什么不能实现的原因所在了。</p>
<h4 id="3-指导设计"><a href="#3-指导设计" class="headerlink" title="3.指导设计"></a>3.指导设计</h4><p>有的同学觉得领域建模偏空洞，比较虚，其实除了能够简化认识和统一认识外，领域建模还可能指导代码设计，比如上面举的店铺导航Tab的例子，笔者就是通过领域建模来设计的，虽然它是一个小的需求，并不妨碍领域建模的运用。在下图中，可以清晰的看到，导航栏包含了若干个Tab，一个Tab包含规格信息和点击操作信息。把这个业务模式画出来之后，对应的代码中也会有上面的概念，现实与代码之间存在映射关系，模型即代码，代码即模型。如果你的模型不能反映现实，模块只能算是一个花架子，范钢老师对此总结了三句话：现实有什么事物，对应有什么对象；现实事物有什么行为，对应对象有什么方法；现实事物有什么联系，对应对象有什么关联。</p>
<p><img src="https://s5.51cto.com/oss/202108/19/cda69d908efb092af3cbc3b5baec041b.jpg"></p>
<h2 id="四、设计原则的底层逻辑"><a href="#四、设计原则的底层逻辑" class="headerlink" title="四、设计原则的底层逻辑"></a>四、设计原则的底层逻辑</h2><h4 id="1-SOLID"><a href="#1-SOLID" class="headerlink" title="1.SOLID"></a>1.SOLID</h4><p>对于设计原则，一般我们会谈到SOLID，它包含了五个设计原则：</p>
<ul>
<li><p>单一职责原则：A class should have one, and only one, reason to change，一个类只能因为一个理由被修改。</p>
</li>
<li><p>开闭原则：Entities should be open for extension, but closed for modification，对扩展开放，对修改关闭。</p>
</li>
<li><p>里氏替换原则：Functions that use pointers of references to base classes must be able to use objects of derived classes without knowing it，子类可以替换父类。</p>
</li>
<li><p>接口隔离原则：A client should not be forced to implement an interface that it doesn’t use，不能强制客户端实现它不使用的接口，应该把接口拆的尽可能小。</p>
</li>
<li><p>依赖倒置原则：Abstractions should not depend on details. Details should depend on abstractions，抽象不依赖于细节，而细节依赖于抽象。</p>
</li>
</ul>
<h4 id="2-为什么要有设计原则"><a href="#2-为什么要有设计原则" class="headerlink" title="2.为什么要有设计原则"></a>2.为什么要有设计原则</h4><p>我们对SOLID原则基本上听说过或者了解过，但为什么要有这些设计原则呢？为了回答这个问题，我们从目标往下推导下。软件开发的目标是高内聚、低耦合，这句挂在嘴边的话，发现很难衡量，比如要回答：什么样的叫高内聚？什么样的叫低耦合？高内聚要高到什么程度？低耦合要低到什么程度？这四个问题并不太好回答。</p>
<p>反过来想想，如果我们的代码不是高内聚和低耦合的会怎样？也即是低内聚和高耦合的场景。如果代码是低内聚和高耦合，则会出现修改一个逻辑，会导致多处代码要修改，这个并不是我们希望看到的，尤其在修改原有的逻辑，很容易出现bug，比如笔者之前修改一个问题，改了另外一处的规则，看起来是没有问题，结果影响到了一个业务方，这也是为什么开闭原则提出对修改关闭的原因，修改原有的逻辑是有风险的。</p>
<p>理想的情况是修改只限定在某个局部范围内，这样影响的范围有限，因此我们要求逻辑要单一，不要包含多个职责。再往下思考下：为什么我们要修改呢？除了原有逻辑有bug要修复、代码重构外，一个重要的原因是需求发生了变化，是变化导致我们要对原有的逻辑进行修改。如果没有修改的场景，也就没有所谓的高内聚、低耦合之说了。因此设计原则的底层逻辑就是让软件能够较好地应对变化，降本增效。</p>
<h4 id="3-如何落地实践"><a href="#3-如何落地实践" class="headerlink" title="3.如何落地实践"></a>3.如何落地实践</h4><p>设计原则只是一个指导的方针，离落地实践还有很大的一段距离，就像有些同学说设计原则我懂了，但我依然运用不到。实际上这个问题的本质还是对设计原则的底层逻辑没有理解，没有洞察出变化关注点，怎么解决这个问题呢？设计模式给出的答案：找到变化、封装变化。</p>
<p><img src="https://s4.51cto.com/oss/202108/19/bc333aef9bcba4ddf470d3d16736c6bc.jpg"></p>
<h2 id="五、设计模式的本质"><a href="#五、设计模式的本质" class="headerlink" title="五、设计模式的本质"></a>五、设计模式的本质</h2><p><img src="https://s4.51cto.com/oss/202108/19/026a743caa1478fc6e93f5dd4ebf0644.jpg"></p>
<h2 id="六、案例实践"><a href="#六、案例实践" class="headerlink" title="六、案例实践"></a>六、案例实践</h2><p>当调用的接口有不同的实现时（入参、出参、接口都不相同），需要抽象出一层防腐层，怎么去实现呢？接下来分别看2个案例，这2个案例的侧重点不一样，一个是偏行为的抽象，一个是偏结构的抽象。</p>
<h4 id="1-店铺品牌查询"><a href="#1-店铺品牌查询" class="headerlink" title="1.店铺品牌查询"></a>1.店铺品牌查询</h4><p>店铺需要查询店铺品牌信息，然而Lazada和AE的接口是不一样的，怎么抽象防腐层呢？</p>
<p>首先最简单的方案很容易想到，就是定义一个接口，然后有两个实现。它的优点是层次简单，大家基本看了就懂。它的缺点也是明显的，在两个实现类中，职责不一单一，承担了两个职责：一个是实现店铺品牌的查询，另一个是数据转换。</p>
<p>根据方案一提到的缺点，很容易想到使用适配器模式，将之前的类拆成两个类：一个类是调用对应的品牌服务；另一个类做数据适配转换。不过此时的方式还有一个缺点就是在国际化场景下，要考虑多租户之间的隔离，比如Lazada有多个站点，如何实现更细粒度的差异呢？方案三基于这些的思考就产生了。</p>
<p>方案三是引入了多租户框架，能够支撑多租户场景。</p>
<p><img src="https://s5.51cto.com/oss/202108/19/3e860a809e23a01ab9ab7cb3929eddac.jpg"></p>
<h4 id="2-店铺优惠券查询"><a href="#2-店铺优惠券查询" class="headerlink" title="2.店铺优惠券查询"></a>2.店铺优惠券查询</h4><p>有一种”万金油”式开发模式：组装参数、调用接口、解析响应结果，你会发现这种模式太万能了，适合所有的场景，这样的开发模式也即是”事务脚本模式”或者”面条型代码”。</p>
<p>优惠券查询的案例，用领域建模的模式，首先思考有哪些实体。优惠券查询的本质：通过xx条件查询返回满足条件的优惠券集合。对于优惠券来讲，有两类信息至关重要。一个是优惠券的规格信息，如优惠券名称、优惠金额、有效期等；另一个是优惠券的限制条件。在查询的时候，是查店铺优惠券，还是查粉丝优惠券，或者是查询商品优惠券……。因此分开两部分抽象优惠券：一个是优惠券查询请求；另一个是优惠券规格实体。</p>
<p>如果按照这样的设计，有一个缺点是业务方理解复杂度会上升，它是偏底层实现，没有做到使用简单。优惠券偏产品交付而非仅仅功能交付。因此在底层实现之上，再抽象出产品组件，这样业务方使用起来就比较简单。</p>
<p><img src="https://s4.51cto.com/oss/202108/19/c8988f8ea19ac3beb7b59fb634024f7d.jpg"></p>
<!-- 本文转自 [https://www.51cto.com/article/678570.html](https://www.51cto.com/article/678570.html)，如有侵权，请联系删除。 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="https://yxk17668.github.io/yxk17668/2019/05/16/%E6%8F%90%E5%8D%87%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%EF%BC%9A%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B%E3%80%81%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99%E3%80%81%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" data-id="clvte0cgg000fb9ika0fi0awt" data-title="提升代码质量：领域模型、设计原则、设计模式" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/%E5%9F%BA%E7%A1%80%E8%BF%9B%E9%98%B6/" rel="tag">基础进阶</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" rel="tag">架构设计</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/" rel="tag">设计原则</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/yxk17668/tags/%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B/" rel="tag">领域模型</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/yxk17668/page/2/">2</a><a class="extend next" rel="next" href="/yxk17668/page/2/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/Apidoc/" rel="tag">Apidoc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/Api%E6%96%87%E6%A1%A3/" rel="tag">Api文档</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/Git/" rel="tag">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/Git-mistake/" rel="tag">Git mistake</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/Markdown/" rel="tag">Markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/helper-live2d/" rel="tag">helper-live2d</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/nginx/" rel="tag">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/session/" rel="tag">session</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/spring-session/" rel="tag">spring-session</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/springMVC/" rel="tag">springMVC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/springboot/" rel="tag">springboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/yilia/" rel="tag">yilia</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/%E4%BD%8E%E4%BB%A3%E7%A0%81%E5%B9%B3%E5%8F%B0/" rel="tag">低代码平台</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/%E5%9F%BA%E7%A1%80%E8%BF%9B%E9%98%B6/" rel="tag">基础进阶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" rel="tag">微服务</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" rel="tag">架构设计</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/%E6%B3%A8%E8%A7%A3/" rel="tag">注解</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/" rel="tag">设计原则</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/yxk17668/tags/%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B/" rel="tag">领域模型</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/yxk17668/tags/Apidoc/" style="font-size: 10px;">Apidoc</a> <a href="/yxk17668/tags/Api%E6%96%87%E6%A1%A3/" style="font-size: 10px;">Api文档</a> <a href="/yxk17668/tags/Git/" style="font-size: 15px;">Git</a> <a href="/yxk17668/tags/Git-mistake/" style="font-size: 10px;">Git mistake</a> <a href="/yxk17668/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/yxk17668/tags/helper-live2d/" style="font-size: 10px;">helper-live2d</a> <a href="/yxk17668/tags/hexo/" style="font-size: 20px;">hexo</a> <a href="/yxk17668/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/yxk17668/tags/session/" style="font-size: 10px;">session</a> <a href="/yxk17668/tags/spring-session/" style="font-size: 10px;">spring-session</a> <a href="/yxk17668/tags/springMVC/" style="font-size: 10px;">springMVC</a> <a href="/yxk17668/tags/springboot/" style="font-size: 10px;">springboot</a> <a href="/yxk17668/tags/yilia/" style="font-size: 15px;">yilia</a> <a href="/yxk17668/tags/%E4%BD%8E%E4%BB%A3%E7%A0%81%E5%B9%B3%E5%8F%B0/" style="font-size: 10px;">低代码平台</a> <a href="/yxk17668/tags/%E5%9F%BA%E7%A1%80%E8%BF%9B%E9%98%B6/" style="font-size: 15px;">基础进阶</a> <a href="/yxk17668/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" style="font-size: 10px;">微服务</a> <a href="/yxk17668/tags/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" style="font-size: 15px;">架构设计</a> <a href="/yxk17668/tags/%E6%B3%A8%E8%A7%A3/" style="font-size: 10px;">注解</a> <a href="/yxk17668/tags/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/" style="font-size: 15px;">设计原则</a> <a href="/yxk17668/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 15px;">设计模式</a> <a href="/yxk17668/tags/%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B/" style="font-size: 15px;">领域模型</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/yxk17668/archives/2023/05/">五月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/yxk17668/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/yxk17668/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/yxk17668/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/yxk17668/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/yxk17668/archives/2018/03/">三月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/yxk17668/2023/05/16/%E4%B8%80%E7%A7%8D%E9%9D%A2%E5%90%91%E5%90%8E%E7%AB%AF%E7%9A%84%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BD%8E%E4%BB%A3%E7%A0%81%E5%B9%B3%E5%8F%B0%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/">一种面向后端的微服务低代码平台架构设计</a>
          </li>
        
          <li>
            <a href="/yxk17668/2019/08/09/nginx-%E8%A7%A3%E5%86%B3session%E4%B8%80%E8%87%B4%E6%80%A7/">nginx 解决session一致性</a>
          </li>
        
          <li>
            <a href="/yxk17668/2019/07/14/Apidoc%E7%94%9F%E6%88%90Restful-web-Api%E6%96%87%E6%A1%A3/">Apidoc生成Restful web Api文档</a>
          </li>
        
          <li>
            <a href="/yxk17668/2019/07/10/Git-Mistake/">Git --changes not staged for commit</a>
          </li>
        
          <li>
            <a href="/yxk17668/2019/07/10/Git%E5%AE%9E%E7%94%A8%E7%AF%87/">Git实用篇</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 yxk17668<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/yxk17668/" class="mobile-nav-link">Home</a>
  
    <a href="/yxk17668/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/yxk17668/js/jquery-3.6.4.min.js"></script>



  
<script src="/yxk17668/fancybox/jquery.fancybox.min.js"></script>




<script src="/yxk17668/js/script.js"></script>





  </div>
</body>
</html>